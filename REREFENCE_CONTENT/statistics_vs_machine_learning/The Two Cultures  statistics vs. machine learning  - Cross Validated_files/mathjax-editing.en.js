"use strict";StackExchange.mathjaxEditing=function(){function e(e,t,n){var i=s.slice(e,t+1).join("").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");for(m.Browser.isMSIE&&(i=i.replace(/(%[^\n]*)\n/g,"$1<br/>\n"));t>e;)s[t]="",t--;s[e]="@@"+u.length+"@@",n&&(i=n(i)),u.push(i),r=c=l=null}function t(t){r=c=l=null,u=[];var n,i=/`/.test(t);i?(t=t.replace(/~/g,"~T").replace(/(^|[^\\`])(`+)(?!`)([^\n]*?[^`\n])\2(?!`)/gm,function(e){return e.replace(/\$/g,"~D")}),n=function(e){return e.replace(/~([TD])/g,function(e,t){return{"T":"~","D":"$"}[t]})}):n=function(e){return e},s=v(t.replace(/\r\n?/g,"\n"),b);for(var a=1,o=s.length;o>a;a+=2){var p=s[a];"@"===p.charAt(0)?(s[a]="@@"+u.length+"@@",u.push(p)):r?p===c?d?l=a:e(r,a,n):p.match(/\n.*\n/)?(l&&(a=l,e(r,a,n)),r=c=l=null,d=0):"{"===p?d++:"}"===p&&d&&d--:p===g||"$$"===p?(r=a,c=p,d=0):"begin"===p.substr(1,5)&&(r=a,c="\\end"+p.substr(6),d=0)}return l&&e(r,l,n),n(s.join(""))}function n(e){return e=e.replace(/@@(\d+)@@/g,function(e,t){return u[t]}),u=null,e}function i(){h=!1,m.cancelTypeset=!1,m.Queue(["Typeset",m,f])}function a(){!h&&p&&(h=!0,m.Cancel(),m.Queue(i))}function o(e,i,o){f=document.getElementById("wmd-preview"+i),g=o[0][0];var s=e.getConverter();s.hooks.chain("preConversion",t),s.hooks.chain("preSafe",n),e.hooks.chain("onPreviewRefresh",a)}var s,r,c,l,d,u,p=!1,h=!1,f=null,g="$",m=MathJax.Hub;m.Queue(function(){p=!0,m.processUpdateTime=50,m.Config({"HTML-CSS":{"EqnChunk":10,"EqnChunkFactor":1},"SVG":{"EqnChunk":10,"EqnChunkFactor":1}})});var v,b=/(\$\$?|\\(?:begin|end)\{[a-z]*\*?\}|\\[\\{}$]|[{}]|(?:\n\s*)+|@@\d+@@)/i;return v=3==="aba".split(/(b)/).length?function(e,t){return e.split(t)}:function(e,t){var n,i=[];if(!t.global){var a=t.toString(),o="";a=a.replace(/^\/(.*)\/([im]*)$/,function(e,t,n){return o=n,t}),t=new RegExp(a,o+"g")}t.lastIndex=0;for(var s=0;n=t.exec(e);)i.push(e.substring(s,n.index)),i.push.apply(i,n.slice(1)),s=n.index+n[0].length;return i.push(e.substring(s)),i},{"prepareWmdForMathJax":o}}(),function(){var e=MathJax.Hub;if(!e.Cancel){e.cancelTypeset=!1;var t="MathJax Canceled";e.Register.StartupHook("HTML-CSS Jax Config",function(){var n=MathJax.OutputJax["HTML-CSS"],i=n.Translate;n.Augment({"Translate":function(a,o){if(e.cancelTypeset||o.cancelled)throw Error(t);return i.call(n,a,o)}})}),e.Register.StartupHook("SVG Jax Config",function(){var n=MathJax.OutputJax.SVG,i=n.Translate;n.Augment({"Translate":function(a,o){if(e.cancelTypeset||o.cancelled)throw Error(t);return i.call(n,a,o)}})}),e.Register.StartupHook("TeX Jax Config",function(){var n=MathJax.InputJax.TeX,i=n.Translate;n.Augment({"Translate":function(a,o){if(e.cancelTypeset||o.cancelled)throw Error(t);return i.call(n,a,o)}})});var n=e.processError;e.processError=function(i,a,o){return i.message!==t?n.call(e,i,a,o):(MathJax.Message.Clear(0,0),a.jaxIDs=[],a.jax={},a.scripts=[],a.i=a.j=0,a.cancelled=!0,null)},e.Cancel=function(){this.cancelTypeset=!0}}}();