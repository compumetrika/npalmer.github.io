jQuery.easing['jswing']=jQuery.easing['swing'];jQuery.extend(jQuery.easing,{def:'easeOutQuad',swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d);},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b;},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b;},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b;},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return jQuery.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b;}});
;(function(d){var m="left",l="right",c="up",s="down",b="in",t="out",j="none",o="auto",i="swipe",p="pinch",u="tap",x="horizontal",q="vertical",g="all",e="start",h="move",f="end",n="cancel",a="ontouchstart" in window,v="TouchSwipe";var k={fingers:1,threshold:75,cancelThreshold:25,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,triggerOnTouchEnd:true,triggerOnTouchLeave:false,allowPageScroll:"auto",fallbackToMouseEvents:true,excludedElements:"button, input, select, textarea, a, .noSwipe"};d.fn.swipe=function(A){var z=d(this),y=z.data(v);if(y&&typeof A==="string"){if(y[A]){return y[A].apply(this,Array.prototype.slice.call(arguments,1))}else{d.error("Method "+A+" does not exist on jQuery.swipe")}}else{if(!y&&(typeof A==="object"||!A)){return r.apply(this,arguments)}}return z};d.fn.swipe.defaults=k;d.fn.swipe.phases={PHASE_START:e,PHASE_MOVE:h,PHASE_END:f,PHASE_CANCEL:n};d.fn.swipe.directions={LEFT:m,RIGHT:l,UP:c,DOWN:s,IN:b,OUT:t};d.fn.swipe.pageScroll={NONE:j,HORIZONTAL:x,VERTICAL:q,AUTO:o};d.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:g};function r(y){if(y&&(y.allowPageScroll===undefined&&(y.swipe!==undefined||y.swipeStatus!==undefined))){y.allowPageScroll=j}if(y.click!==undefined&&y.tap===undefined){y.tap=y.click}if(!y){y={}}y=d.extend({},d.fn.swipe.defaults,y);return this.each(function(){var A=d(this);var z=A.data(v);if(!z){z=new w(this,y);A.data(v,z)}})}function w(S,ag){var aJ=(a||!ag.fallbackToMouseEvents),az=aJ?"touchstart":"mousedown",U=aJ?"touchmove":"mousemove",av=aJ?"touchend":"mouseup",D=aJ?null:"mouseleave",R="touchcancel";var ad=0,N=null,ah=0,aF=0,A=0,aj=1,aA=0,aN=0,Z=null;var H=d(S);var O="start";var aI=0;var ai=null;var I=0,Y=0,aD=0,aP=0;try{H.bind(az,at);H.bind(R,L)}catch(aG){d.error("events not supported "+az+","+R+" on jQuery.swipe")}this.enable=function(){H.bind(az,at);H.bind(R,L);return H};this.disable=function(){Q();return H};this.destroy=function(){Q();H.data(v,null);return H};this.option=function(aR,aQ){if(ag[aR]!==undefined){if(aQ===undefined){return ag[aR]}else{ag[aR]=aQ}}else{d.error("Option "+aR+" does not exist on jQuery.swipe.options")}};function at(aS){if(X()){return}if(d(aS.target).closest(ag.excludedElements,H).length>0){return}var aT=aS.originalEvent?aS.originalEvent:aS;var aR,aQ=a?aT.touches[0]:aT;O=e;if(a){aI=aT.touches.length}else{aS.preventDefault()}ad=0;N=null;aN=null;ah=0;aF=0;A=0;aj=1;aA=0;ai=T();Z=aE();z();if(!a||(aI===ag.fingers||ag.fingers===g)||ap()){aO(0,aQ);I=B();if(aI==2){aO(1,aT.touches[1]);aF=A=aa(ai[0].start,ai[1].start)}if(ag.swipeStatus||ag.pinchStatus){aR=aH(aT,O)}}else{aR=false}if(aR===false){O=n;aH(aT,O);return aR}else{ak(true)}}function P(aT){var aW=aT.originalEvent?aT.originalEvent:aT;if(O===f||O===n||af()){return}var aS,aR=a?aW.touches[0]:aW;var aU=V(aR);Y=B();if(a){aI=aW.touches.length}O=h;if(aI==2){if(aF==0){aO(1,aW.touches[1]);aF=A=aa(ai[0].start,ai[1].start)}else{V(aW.touches[1]);A=aa(ai[0].end,ai[1].end);aN=ao(ai[0].end,ai[1].end)}aj=y(aF,A);aA=Math.abs(aF-A)}if((aI===ag.fingers||ag.fingers===g)||!a||ap()){N=ar(aU.start,aU.end);C(aT,N);ad=G(aU.start,aU.end);ah=K();aK(N,ad);if(ag.swipeStatus||ag.pinchStatus){aS=aH(aW,O)}if(!ag.triggerOnTouchEnd||ag.triggerOnTouchLeave){var aQ=true;if(ag.triggerOnTouchLeave){var aV=au(this);aQ=aC(aU.end,aV)}if(!ag.triggerOnTouchEnd&&aQ){O=aM(h)}else{if(ag.triggerOnTouchLeave&&!aQ){O=aM(f)}}if(O==n||O==f){aH(aW,O)}}}else{O=n;aH(aW,O)}if(aS===false){O=n;aH(aW,O)}}function ab(aS){var aU=aS.originalEvent;if(a){if(aU.touches.length>0){aw();return true}}if(af()){aI=aP}aS.preventDefault();Y=B();if(ag.triggerOnTouchEnd||(ag.triggerOnTouchEnd==false&&O===h)){O=f;var aR=((aI===ag.fingers||ag.fingers===g)||!a);var aQ=ai[0].end.x!==0;var aT=aR&&aQ&&(an()||aB());if(aT){aH(aU,O)}else{O=n;aH(aU,O)}}else{if(!ag.triggerOnTouchEnd&&ay()){O=f;am(aU,O,u)}else{if(O===h){O=n;aH(aU,O)}}}ak(false)}function L(){aI=0;Y=0;I=0;aF=0;A=0;aj=1;z();ak(false)}function W(aQ){var aR=aQ.originalEvent;if(ag.triggerOnTouchLeave){O=aM(f);aH(aR,O)}}function Q(){H.unbind(az,at);H.unbind(R,L);H.unbind(U,P);H.unbind(av,ab);if(D){H.unbind(D,W)}ak(false)}function aM(aT){var aS=aT;var aR=aq();var aQ=ae();if(!aR){aS=n}else{if(aQ&&aT==h&&(!ag.triggerOnTouchEnd||ag.triggerOnTouchLeave)){aS=f}else{if(!aQ&&aT==f&&ag.triggerOnTouchLeave){aS=n}}}return aS}function aH(aS,aQ){var aR=undefined;if(ac()){aR=am(aS,aQ,i)}if(ap()&&aR!==false){aR=am(aS,aQ,p)}if(ay()&&aR!==false){aR=am(aS,aQ,u)}if(aQ===n){L(aS)}if(aQ===f){if(a){if(aS.touches.length==0){L(aS)}}else{L(aS)}}return aR}function am(aT,aQ,aS){var aR=undefined;if(aS==i){H.trigger("swipeStatus",[aQ,N||null,ad||0,ah||0,aI]);if(ag.swipeStatus){aR=ag.swipeStatus.call(H,aT,aQ,N||null,ad||0,ah||0,aI);if(aR===false){return false}}if(aQ==f&&aB()){H.trigger("swipe",[N,ad,ah,aI]);if(ag.swipe){aR=ag.swipe.call(H,aT,N,ad,ah,aI);if(aR===false){return false}}switch(N){case m:H.trigger("swipeLeft",[N,ad,ah,aI]);if(ag.swipeLeft){aR=ag.swipeLeft.call(H,aT,N,ad,ah,aI)}break;case l:H.trigger("swipeRight",[N,ad,ah,aI]);if(ag.swipeRight){aR=ag.swipeRight.call(H,aT,N,ad,ah,aI)}break;case c:H.trigger("swipeUp",[N,ad,ah,aI]);if(ag.swipeUp){aR=ag.swipeUp.call(H,aT,N,ad,ah,aI)}break;case s:H.trigger("swipeDown",[N,ad,ah,aI]);if(ag.swipeDown){aR=ag.swipeDown.call(H,aT,N,ad,ah,aI)}break}}}if(aS==p){H.trigger("pinchStatus",[aQ,aN||null,aA||0,ah||0,aI,aj]);if(ag.pinchStatus){aR=ag.pinchStatus.call(H,aT,aQ,aN||null,aA||0,ah||0,aI,aj);if(aR===false){return false}}if(aQ==f&&an()){switch(aN){case b:H.trigger("pinchIn",[aN||null,aA||0,ah||0,aI,aj]);if(ag.pinchIn){aR=ag.pinchIn.call(H,aT,aN||null,aA||0,ah||0,aI,aj)}break;case t:H.trigger("pinchOut",[aN||null,aA||0,ah||0,aI,aj]);if(ag.pinchOut){aR=ag.pinchOut.call(H,aT,aN||null,aA||0,ah||0,aI,aj)}break}}}if(aS==u){if(aQ===n||aQ===f){if((aI===1||!a)&&(isNaN(ad)||ad===0)){H.trigger("tap",[aT.target]);if(ag.tap){aR=ag.tap.call(H,aT,aT.target)}}}}return aR}function ae(){var aQ=true;if(ag.threshold!==null){aQ=ad>=ag.threshold}if(aQ&&ag.cancelThreshold!==null){aQ=(M(N)-ad)<ag.cancelThreshold}return aQ}function al(){if(ag.pinchThreshold!==null){return aA>=ag.pinchThreshold}return true}function aq(){var aQ;if(ag.maxTimeThreshold){if(ah>=ag.maxTimeThreshold){aQ=false}else{aQ=true}}else{aQ=true}return aQ}function C(aQ,aR){if(ag.allowPageScroll===j||ap()){aQ.preventDefault()}else{var aS=ag.allowPageScroll===o;switch(aR){case m:if((ag.swipeLeft&&aS)||(!aS&&ag.allowPageScroll!=x)){aQ.preventDefault()}break;case l:if((ag.swipeRight&&aS)||(!aS&&ag.allowPageScroll!=x)){aQ.preventDefault()}break;case c:if((ag.swipeUp&&aS)||(!aS&&ag.allowPageScroll!=q)){aQ.preventDefault()}break;case s:if((ag.swipeDown&&aS)||(!aS&&ag.allowPageScroll!=q)){aQ.preventDefault()}break}}}function an(){return al()}function ap(){return !!(ag.pinchStatus||ag.pinchIn||ag.pinchOut)}function ax(){return !!(an()&&ap())}function aB(){var aQ=aq();var aS=ae();var aR=aS&&aQ;return aR}function ac(){return !!(ag.swipe||ag.swipeStatus||ag.swipeLeft||ag.swipeRight||ag.swipeUp||ag.swipeDown)}function E(){return !!(aB()&&ac())}function ay(){return !!(ag.tap)}function aw(){aD=B();aP=event.touches.length+1}function z(){aD=0;aP=0}function af(){var aQ=false;if(aD){var aR=B()-aD;if(aR<=ag.fingerReleaseThreshold){aQ=true}}return aQ}function X(){return !!(H.data(v+"_intouch")===true)}function ak(aQ){if(aQ===true){H.bind(U,P);H.bind(av,ab);if(D){H.bind(D,W)}}else{H.unbind(U,P,false);H.unbind(av,ab,false);if(D){H.unbind(D,W,false)}}H.data(v+"_intouch",aQ===true)}function aO(aR,aQ){var aS=aQ.identifier!==undefined?aQ.identifier:0;ai[aR].identifier=aS;ai[aR].start.x=ai[aR].end.x=aQ.pageX||aQ.clientX;ai[aR].start.y=ai[aR].end.y=aQ.pageY||aQ.clientY;return ai[aR]}function V(aQ){var aS=aQ.identifier!==undefined?aQ.identifier:0;var aR=J(aS);aR.end.x=aQ.pageX||aQ.clientX;aR.end.y=aQ.pageY||aQ.clientY;return aR}function J(aR){for(var aQ=0;aQ<ai.length;aQ++){if(ai[aQ].identifier==aR){return ai[aQ]}}}function T(){var aQ=[];for(var aR=0;aR<=5;aR++){aQ.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0})}return aQ}function aK(aQ,aR){aR=Math.max(aR,M(aQ));Z[aQ].distance=aR}function M(aQ){return Z[aQ].distance}function aE(){var aQ={};aQ[m]=aL(m);aQ[l]=aL(l);aQ[c]=aL(c);aQ[s]=aL(s);return aQ}function aL(aQ){return{direction:aQ,distance:0}}function K(){return Y-I}function aa(aT,aS){var aR=Math.abs(aT.x-aS.x);var aQ=Math.abs(aT.y-aS.y);return Math.round(Math.sqrt(aR*aR+aQ*aQ))}function y(aQ,aR){var aS=(aR/aQ)*1;return aS.toFixed(2)}function ao(){if(aj<1){return t}else{return b}}function G(aR,aQ){return Math.round(Math.sqrt(Math.pow(aQ.x-aR.x,2)+Math.pow(aQ.y-aR.y,2)))}function F(aT,aR){var aQ=aT.x-aR.x;var aV=aR.y-aT.y;var aS=Math.atan2(aV,aQ);var aU=Math.round(aS*180/Math.PI);if(aU<0){aU=360-Math.abs(aU)}return aU}function ar(aR,aQ){var aS=F(aR,aQ);if((aS<=45)&&(aS>=0)){return m}else{if((aS<=360)&&(aS>=315)){return m}else{if((aS>=135)&&(aS<=225)){return l}else{if((aS>45)&&(aS<135)){return s}else{return c}}}}}function B(){var aQ=new Date();return aQ.getTime()}function au(aQ){aQ=d(aQ);var aS=aQ.offset();var aR={left:aS.left,right:aS.left+aQ.outerWidth(),top:aS.top,bottom:aS.top+aQ.outerHeight()};return aR}function aC(aQ,aR){return(aQ.x>aR.left&&aQ.x<aR.right&&aQ.y>aR.top&&aQ.y<aR.bottom)}}})(jQuery);
;/* jquery.nicescroll 3.1.9 InuYaksa*2013 MIT http://areaaperta.com/nicescroll */(function(e){var w=!1,A=!1,G=5E3,H=2E3,I=function(){var e=document.getElementsByTagName("script"),e=e[e.length-1].src.split("?")[0];return 0<e.split("/").length?e.split("/").slice(0,-1).join("/")+"/":""}(),u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||!1,v=window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||
window.msCancelRequestAnimationFrame||!1,C={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,
right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0},B=!1,J=function(){if(B)return B;var e=document.createElement("DIV"),c={haspointerlock:"pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document};c.isopera=
"opera"in window;c.isopera12=c.isopera&&"getUserMedia"in navigator;c.isie="all"in document&&"attachEvent"in e&&!c.isopera;c.isieold=c.isie&&!("msInterpolationMode"in e.style);c.isie7=c.isie&&!c.isieold&&(!("documentMode"in document)||7==document.documentMode);c.isie8=c.isie&&"documentMode"in document&&8==document.documentMode;c.isie9=c.isie&&"performance"in window&&9<=document.documentMode;c.isie10=c.isie&&"performance"in window&&10<=document.documentMode;c.isie9mobile=/iemobile.9/i.test(navigator.userAgent);
c.isie9mobile&&(c.isie9=!1);c.isie7mobile=!c.isie9mobile&&c.isie7&&/iemobile/i.test(navigator.userAgent);c.ismozilla="MozAppearance"in e.style;c.iswebkit="WebkitAppearance"in e.style;c.ischrome="chrome"in window;c.ischrome22=c.ischrome&&c.haspointerlock;c.cantouch="ontouchstart"in document.documentElement||"ontouchstart"in window;c.hasmstouch=window.navigator.msPointerEnabled||!1;c.ismac=/^mac$/i.test(navigator.platform);c.isios=c.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform);c.isios4=c.isios&&
!("seal"in Object);c.isandroid=/android/i.test(navigator.userAgent);c.trstyle=!1;c.hastransform=!1;c.hastranslate3d=!1;c.transitionstyle=!1;c.hastransition=!1;c.transitionend=!1;for(var h=["transform","msTransform","webkitTransform","MozTransform","OTransform"],l=0;l<h.length;l++)if("undefined"!=typeof e.style[h[l]]){c.trstyle=h[l];break}c.hastransform=!1!=c.trstyle;c.hastransform&&(e.style[c.trstyle]="translate3d(1px,2px,3px)",c.hastranslate3d=/translate3d/.test(e.style[c.trstyle]));c.transitionstyle=
!1;c.prefixstyle="";c.transitionend=!1;for(var h="transition webkitTransition MozTransition OTransition OTransition msTransition KhtmlTransition".split(" "),p=" -webkit- -moz- -o- -o -ms- -khtml-".split(" "),b="transitionend webkitTransitionEnd transitionend otransitionend oTransitionEnd msTransitionEnd KhtmlTransitionEnd".split(" "),l=0;l<h.length;l++)if(h[l]in e.style){c.transitionstyle=h[l];c.prefixstyle=p[l];c.transitionend=b[l];break}c.hastransition=c.transitionstyle;a:{h=["-moz-grab","-webkit-grab",
"grab"];if(c.ischrome&&!c.ischrome22||c.isie)h=[];for(l=0;l<h.length;l++)if(p=h[l],e.style.cursor=p,e.style.cursor==p){h=p;break a}h="url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize"}c.cursorgrabvalue=h;c.hasmousecapture="setCapture"in e;return B=c},K=function(k,c){function h(){var d=b.win;if("zIndex"in d)return d.zIndex();for(;0<d.length&&9!=d[0].nodeType;){var c=d.css("zIndex");if(!isNaN(c)&&0!=c)return c;d=d.parent()}return!1}function l(d,c,f){c=d.css(c);d=parseFloat(c);return isNaN(d)?
(d=s[c]||0,f=3==d?f?b.win.outerHeight()-b.win.innerHeight():b.win.outerWidth()-b.win.innerWidth():1,b.isie8&&d&&(d+=1),f?d:0):d}function p(d,c,f){var g=0,e=0,h=1;"wheelDeltaY"in d?(h=b.opt.mousescrollstep/48,g=Math.floor(d.wheelDeltaX*h),e=Math.floor(d.wheelDeltaY*h),c&&(0==g&&e)&&(g=e,e=0)):(h=d.detail?-1*d.detail:d.wheelDelta/40)&&(c?g=Math.floor(h*b.opt.mousescrollstep):e=Math.floor(h*b.opt.mousescrollstep));g&&(b.scrollmom&&b.scrollmom.stop(),b.lastdeltax+=g,b.debounced("mousewheelx",function(){var d=
b.lastdeltax;b.lastdeltax=0;b.rail.drag||b.doScrollLeftBy(d)},120));if(e){if(b.opt.nativeparentscrolling&&f)if(0>e){if(b.getScrollTop()>=b.page.maxh)return!0}else if(0>=b.getScrollTop())return!0;b.scrollmom&&b.scrollmom.stop();b.lastdeltay+=e;b.debounced("mousewheely",function(){var d=b.lastdeltay;b.lastdeltay=0;b.rail.drag||b.doScrollBy(d)},120)}return b.cancelEvent(d)}var b=this;this.version="3.1.9";this.name="nicescroll";this.me=c;this.opt={doc:e("body"),win:!1};e.extend(this.opt,C);this.opt.snapbackspeed=
80;if(k)for(var q in b.opt)"undefined"!=typeof k[q]&&(b.opt[q]=k[q]);this.iddoc=(this.doc=b.opt.doc)&&this.doc[0]?this.doc[0].id||"":"";this.ispage=/BODY|HTML/.test(b.opt.win?b.opt.win[0].nodeName:this.doc[0].nodeName);this.haswrapper=!1!==b.opt.win;this.win=b.opt.win||(this.ispage?e(window):this.doc);this.docscroll=this.ispage&&!this.haswrapper?e(window):this.win;this.body=e("body");this.iframe=this.isfixed=this.viewport=!1;this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName;
this.istextarea="TEXTAREA"==this.win[0].nodeName;this.forcescreen=!1;this.canshowonmouseevent="scroll"!=b.opt.autohidemode;this.page=this.view=this.onzoomout=this.onzoomin=this.onscrollcancel=this.onscrollend=this.onscrollstart=this.onclick=this.ongesturezoom=this.onkeypress=this.onmousewheel=this.onmousemove=this.onmouseup=this.onmousedown=!1;this.scroll={x:0,y:0};this.scrollratio={x:0,y:0};this.cursorheight=20;this.scrollvaluemax=0;this.observer=this.scrollmom=this.scrollrunning=!1;do this.id="ascrail"+
H++;while(document.getElementById(this.id));this.hasmousefocus=this.hasfocus=this.zoomactive=this.zoom=this.cursorfreezed=this.cursor=this.rail=!1;this.visibility=!0;this.hidden=this.locked=!1;this.cursoractive=!0;this.nativescrollingarea=!1;this.checkarea=0;this.events=[];this.saved={};this.delaylist={};this.synclist={};this.lastdeltay=this.lastdeltax=0;this.detected=J();var g=e.extend({},this.detected);this.ishwscroll=(this.canhwscroll=g.hastransform&&b.opt.hwacceleration)&&b.haswrapper;this.istouchcapable=
!1;g.cantouch&&(g.ischrome&&!g.isios&&!g.isandroid)&&(this.istouchcapable=!0,g.cantouch=!1);g.cantouch&&(g.ismozilla&&!g.isios)&&(this.istouchcapable=!0,g.cantouch=!1);b.opt.enablemouselockapi||(g.hasmousecapture=!1,g.haspointerlock=!1);this.delayed=function(d,c,f,g){var e=b.delaylist[d],h=(new Date).getTime();if(!g&&e&&e.tt)return!1;e&&e.tt&&clearTimeout(e.tt);if(e&&e.last+f>h&&!e.tt)b.delaylist[d]={last:h+f,tt:setTimeout(function(){b.delaylist[d].tt=0;c.call()},f)};else if(!e||!e.tt)b.delaylist[d]=
{last:h,tt:0},setTimeout(function(){c.call()},0)};this.debounced=function(d,c,f){var e=b.delaylist[d];(new Date).getTime();b.delaylist[d]=c;e||setTimeout(function(){var c=b.delaylist[d];b.delaylist[d]=!1;c.call()},f)};this.synched=function(d,c){b.synclist[d]=c;(function(){b.onsync||(u(function(){b.onsync=!1;for(d in b.synclist){var c=b.synclist[d];c&&c.call(b);b.synclist[d]=!1}}),b.onsync=!0)})();return d};this.unsynched=function(d){b.synclist[d]&&(b.synclist[d]=!1)};this.css=function(d,c){for(var f in c)b.saved.css.push([d,
f,d.css(f)]),d.css(f,c[f])};this.scrollTop=function(d){return"undefined"==typeof d?b.getScrollTop():b.setScrollTop(d)};this.scrollLeft=function(d){return"undefined"==typeof d?b.getScrollLeft():b.setScrollLeft(d)};BezierClass=function(b,c,f,e,g,h,l){this.st=b;this.ed=c;this.spd=f;this.p1=e||0;this.p2=g||1;this.p3=h||0;this.p4=l||1;this.ts=(new Date).getTime();this.df=this.ed-this.st};BezierClass.prototype={B2:function(b){return 3*b*b*(1-b)},B3:function(b){return 3*b*(1-b)*(1-b)},B4:function(b){return(1-
b)*(1-b)*(1-b)},getNow:function(){var b=1-((new Date).getTime()-this.ts)/this.spd,c=this.B2(b)+this.B3(b)+this.B4(b);return 0>b?this.ed:this.st+Math.round(this.df*c)},update:function(b,c){this.st=this.getNow();this.ed=b;this.spd=c;this.ts=(new Date).getTime();this.df=this.ed-this.st;return this}};if(this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"};g.hastranslate3d&&g.isios&&this.doc.css("-webkit-backface-visibility","hidden");var t=function(){var d=b.doc.css(g.trstyle);return d&&"matrix"==
d.substr(0,6)?d.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/):!1};this.getScrollTop=function(d){if(!d){if(d=t())return 16==d.length?-d[13]:-d[5];if(b.timerscroll&&b.timerscroll.bz)return b.timerscroll.bz.getNow()}return b.doc.translate.y};this.getScrollLeft=function(d){if(!d){if(d=t())return 16==d.length?-d[12]:-d[4];if(b.timerscroll&&b.timerscroll.bh)return b.timerscroll.bh.getNow()}return b.doc.translate.x};this.notifyScrollEvent=document.createEvent?function(b){var c=document.createEvent("UIEvents");
c.initUIEvent("scroll",!1,!0,window,1);b.dispatchEvent(c)}:document.fireEvent?function(b){var c=document.createEventObject();b.fireEvent("onscroll");c.cancelBubble=!0}:function(b,c){};g.hastranslate3d&&b.opt.enabletranslate3d?(this.setScrollTop=function(d,c){b.doc.translate.y=d;b.doc.translate.ty=-1*d+"px";b.doc.css(g.trstyle,"translate3d("+b.doc.translate.tx+","+b.doc.translate.ty+",0px)");c||b.notifyScrollEvent(b.win[0])},this.setScrollLeft=function(d,c){b.doc.translate.x=d;b.doc.translate.tx=-1*
d+"px";b.doc.css(g.trstyle,"translate3d("+b.doc.translate.tx+","+b.doc.translate.ty+",0px)");c||b.notifyScrollEvent(b.win[0])}):(this.setScrollTop=function(d,c){b.doc.translate.y=d;b.doc.translate.ty=-1*d+"px";b.doc.css(g.trstyle,"translate("+b.doc.translate.tx+","+b.doc.translate.ty+")");c||b.notifyScrollEvent(b.win[0])},this.setScrollLeft=function(d,c){b.doc.translate.x=d;b.doc.translate.tx=-1*d+"px";b.doc.css(g.trstyle,"translate("+b.doc.translate.tx+","+b.doc.translate.ty+")");c||b.notifyScrollEvent(b.win[0])})}else this.getScrollTop=
function(){return b.docscroll.scrollTop()},this.setScrollTop=function(d){return b.docscroll.scrollTop(d)},this.getScrollLeft=function(){return b.docscroll.scrollLeft()},this.setScrollLeft=function(d){return b.docscroll.scrollLeft(d)};this.getTarget=function(b){return!b?!1:b.target?b.target:b.srcElement?b.srcElement:!1};this.hasParent=function(b,c){if(!b)return!1;for(var f=b.target||b.srcElement||b||!1;f&&f.id!=c;)f=f.parentNode||!1;return!1!==f};var s={thin:1,medium:3,thick:5};this.getOffset=function(){if(b.isfixed)return{top:parseFloat(b.win.css("top")),
left:parseFloat(b.win.css("left"))};if(!b.viewport)return b.win.offset();var d=b.win.offset(),c=b.viewport.offset();return{top:d.top-c.top+b.viewport.scrollTop(),left:d.left-c.left+b.viewport.scrollLeft()}};this.updateScrollBar=function(d){if(b.ishwscroll)b.rail.css({height:b.win.innerHeight()}),b.railh&&b.railh.css({width:b.win.innerWidth()});else{var c=b.getOffset(),f=c.top,e=c.left,f=f+l(b.win,"border-top-width",!0);b.win.outerWidth();b.win.innerWidth();var e=e+(b.rail.align?b.win.outerWidth()-
l(b.win,"border-right-width")-b.rail.width:l(b.win,"border-left-width")),g=b.opt.railoffset;g&&(g.top&&(f+=g.top),b.rail.align&&g.left&&(e+=g.left));b.locked||b.rail.css({top:f,left:e,height:d?d.h:b.win.innerHeight()});b.zoom&&b.zoom.css({top:f+1,left:1==b.rail.align?e-20:e+b.rail.width+4});b.railh&&!b.locked&&(f=c.top,e=c.left,d=b.railh.align?f+l(b.win,"border-top-width",!0)+b.win.innerHeight()-b.railh.height:f+l(b.win,"border-top-width",!0),e+=l(b.win,"border-left-width"),b.railh.css({top:d,left:e,
width:b.railh.width}))}};this.doRailClick=function(d,c,f){var e;!(b.rail.drag&&1!=b.rail.drag.pt)&&(!b.locked&&!b.rail.drag)&&(b.cancelScroll(),b.cancelEvent(d),c?(c=f?b.doScrollLeft:b.doScrollTop,e=f?(d.pageX-b.railh.offset().left-b.cursorwidth/2)*b.scrollratio.x:(d.pageY-b.rail.offset().top-b.cursorheight/2)*b.scrollratio.y,c(e)):(c=f?b.doScrollLeftBy:b.doScrollBy,e=f?b.scroll.x:b.scroll.y,d=f?d.pageX-b.railh.offset().left:d.pageY-b.rail.offset().top,f=f?b.view.w:b.view.h,e>=d?c(f):c(-f)))};b.hasanimationframe=
u;b.hascancelanimationframe=v;b.hasanimationframe?b.hascancelanimationframe||(v=function(){b.cancelAnimationFrame=!0}):(u=function(b){return setTimeout(b,16)},v=clearInterval);this.init=function(){b.saved.css=[];if(g.isie7mobile)return!0;g.hasmstouch&&b.css(b.ispage?e("html"):b.win,{"-ms-touch-action":"none"});b.zindex="auto";b.zindex=!b.ispage&&"auto"==b.opt.zindex?h():b.opt.zindex;if(!b.ispage||!g.cantouch&&!g.isieold&&!g.isie9mobile){var d=b.docscroll;b.ispage&&(d=b.haswrapper?b.win:b.doc);g.isie9mobile||
b.css(d,{"overflow-y":"hidden"});b.ispage&&g.isie7&&("BODY"==b.doc[0].nodeName?b.css(e("html"),{"overflow-y":"hidden"}):"HTML"==b.doc[0].nodeName&&b.css(e("body"),{"overflow-y":"hidden"}));g.isios&&(!b.ispage&&!b.haswrapper)&&b.css(e("body"),{"-webkit-overflow-scrolling":"touch"});var c=e(document.createElement("div"));c.css({position:"relative",top:0,"float":"right",width:b.opt.cursorwidth,height:"0px","background-color":b.opt.cursorcolor,border:b.opt.cursorborder,"background-clip":"padding-box",
"-webkit-border-radius":b.opt.cursorborderradius,"-moz-border-radius":b.opt.cursorborderradius,"border-radius":b.opt.cursorborderradius});c.hborder=parseFloat(c.outerHeight()-c.innerHeight());b.cursor=c;var f=e(document.createElement("div"));f.attr("id",b.id);f.addClass("nicescroll-rails");var l,k,p=["left","right"],D;for(D in p)k=p[D],(l=b.opt.railpadding[k])?f.css("padding-"+k,l+"px"):b.opt.railpadding[k]=0;f.append(c);f.width=Math.max(parseFloat(b.opt.cursorwidth),c.outerWidth())+b.opt.railpadding.left+
b.opt.railpadding.right;f.css({width:f.width+"px",zIndex:b.zindex,background:b.opt.background});f.visibility=!0;f.scrollable=!0;f.align="left"==b.opt.railalign?0:1;b.rail=f;c=b.rail.drag=!1;b.opt.boxzoom&&(!b.ispage&&!g.isieold)&&(c=document.createElement("div"),b.bind(c,"click",b.doZoom),b.zoom=e(c),b.zoom.css({cursor:"pointer","z-index":b.zindex,backgroundImage:"url("+I+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),b.opt.dblclickzoom&&b.bind(b.win,"dblclick",b.doZoom),g.cantouch&&
b.opt.gesturezoom&&(b.ongesturezoom=function(d){1.5<d.scale&&b.doZoomIn(d);0.8>d.scale&&b.doZoomOut(d);return b.cancelEvent(d)},b.bind(b.win,"gestureend",b.ongesturezoom)));b.railh=!1;if(b.opt.horizrailenabled){b.css(d,{"overflow-x":"hidden"});c=e(document.createElement("div"));c.css({position:"relative",top:0,height:b.opt.cursorwidth,width:"0px","background-color":b.opt.cursorcolor,border:b.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":b.opt.cursorborderradius,"-moz-border-radius":b.opt.cursorborderradius,
"border-radius":b.opt.cursorborderradius});c.wborder=parseFloat(c.outerWidth()-c.innerWidth());b.cursorh=c;var m=e(document.createElement("div"));m.attr("id",b.id+"-hr");m.addClass("nicescroll-rails");m.height=Math.max(parseFloat(b.opt.cursorwidth),c.outerHeight());m.css({height:m.height+"px",zIndex:b.zindex,background:b.opt.background});m.append(c);m.visibility=!0;m.scrollable=!0;m.align="top"==b.opt.railvalign?0:1;b.railh=m;b.railh.drag=!1}b.ispage?(f.css({position:"fixed",top:"0px",height:"100%"}),
f.align?f.css({right:"0px"}):f.css({left:"0px"}),b.body.append(f),b.railh&&(m.css({position:"fixed",left:"0px",width:"100%"}),m.align?m.css({bottom:"0px"}):m.css({top:"0px"}),b.body.append(m))):(b.ishwscroll?("static"==b.win.css("position")&&b.css(b.win,{position:"relative"}),d="HTML"==b.win[0].nodeName?b.body:b.win,b.zoom&&(b.zoom.css({position:"absolute",top:1,right:0,"margin-right":f.width+4}),d.append(b.zoom)),f.css({position:"absolute",top:0}),f.align?f.css({right:0}):f.css({left:0}),d.append(f),
m&&(m.css({position:"absolute",left:0,bottom:0}),m.align?m.css({bottom:0}):m.css({top:0}),d.append(m))):(b.isfixed="fixed"==b.win.css("position"),d=b.isfixed?"fixed":"absolute",b.isfixed||(b.viewport=b.getViewport(b.win[0])),b.viewport&&(b.body=b.viewport,!1==/relative|absolute/.test(b.viewport.css("position"))&&b.css(b.viewport,{position:"relative"})),f.css({position:d}),b.zoom&&b.zoom.css({position:d}),b.updateScrollBar(),b.body.append(f),b.zoom&&b.body.append(b.zoom),b.railh&&(m.css({position:d}),
b.body.append(m))),g.isios&&b.css(b.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),g.isie&&b.opt.disableoutline&&b.win.attr("hideFocus","true"),g.iswebkit&&b.opt.disableoutline&&b.win.css({outline:"none"}));!1===b.opt.autohidemode?(b.autohidedom=!1,b.rail.css({opacity:b.opt.cursoropacitymax}),b.railh&&b.railh.css({opacity:b.opt.cursoropacitymax})):!0===b.opt.autohidemode?(b.autohidedom=e().add(b.rail),b.railh&&(b.autohidedom=b.autohidedom.add(b.railh))):"scroll"==
b.opt.autohidemode?(b.autohidedom=e().add(b.rail),b.railh&&(b.autohidedom=b.autohidedom.add(b.railh))):"cursor"==b.opt.autohidemode?(b.autohidedom=e().add(b.cursor),b.railh&&(b.autohidedom=b.autohidedom.add(b.railh.cursor))):"hidden"==b.opt.autohidemode&&(b.autohidedom=!1,b.hide(),b.locked=!1);if(g.isie9mobile)b.scrollmom=new E(b),b.onmangotouch=function(d){d=b.getScrollTop();var c=b.getScrollLeft();if(d==b.scrollmom.lastscrolly&&c==b.scrollmom.lastscrollx)return!0;var f=d-b.mangotouch.sy,e=c-b.mangotouch.sx;
if(0!=Math.round(Math.sqrt(Math.pow(e,2)+Math.pow(f,2)))){var n=0>f?-1:1,g=0>e?-1:1,h=+new Date;b.mangotouch.lazy&&clearTimeout(b.mangotouch.lazy);80<h-b.mangotouch.tm||b.mangotouch.dry!=n||b.mangotouch.drx!=g?(b.scrollmom.stop(),b.scrollmom.reset(c,d),b.mangotouch.sy=d,b.mangotouch.ly=d,b.mangotouch.sx=c,b.mangotouch.lx=c,b.mangotouch.dry=n,b.mangotouch.drx=g,b.mangotouch.tm=h):(b.scrollmom.stop(),b.scrollmom.update(b.mangotouch.sx-e,b.mangotouch.sy-f),b.mangotouch.tm=h,f=Math.max(Math.abs(b.mangotouch.ly-
d),Math.abs(b.mangotouch.lx-c)),b.mangotouch.ly=d,b.mangotouch.lx=c,2<f&&(b.mangotouch.lazy=setTimeout(function(){b.mangotouch.lazy=!1;b.mangotouch.dry=0;b.mangotouch.drx=0;b.mangotouch.tm=0;b.scrollmom.doMomentum(30)},100)))}},f=b.getScrollTop(),m=b.getScrollLeft(),b.mangotouch={sy:f,ly:f,dry:0,sx:m,lx:m,drx:0,lazy:!1,tm:0},b.bind(b.docscroll,"scroll",b.onmangotouch);else{if(g.cantouch||b.istouchcapable||b.opt.touchbehavior||g.hasmstouch){b.scrollmom=new E(b);b.ontouchstart=function(d){if(d.pointerType&&
2!=d.pointerType)return!1;if(!b.locked){if(g.hasmstouch)for(var c=d.target?d.target:!1;c;){var f=e(c).getNiceScroll();if(0<f.length&&f[0].me==b.me)break;if(0<f.length)return!1;if("DIV"==c.nodeName&&c.id==b.id)break;c=c.parentNode?c.parentNode:!1}b.cancelScroll();if((c=b.getTarget(d))&&/INPUT/i.test(c.nodeName)&&/range/i.test(c.type))return b.stopPropagation(d);!("clientX"in d)&&"changedTouches"in d&&(d.clientX=d.changedTouches[0].clientX,d.clientY=d.changedTouches[0].clientY);b.forcescreen&&(f=d,
d={original:d.original?d.original:d},d.clientX=f.screenX,d.clientY=f.screenY);b.rail.drag={x:d.clientX,y:d.clientY,sx:b.scroll.x,sy:b.scroll.y,st:b.getScrollTop(),sl:b.getScrollLeft(),pt:2,dl:!1};if(b.ispage||!b.opt.directionlockdeadzone)b.rail.drag.dl="f";else{var f=e(window).width(),n=e(window).height(),h=Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),l=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),n=Math.max(0,l-n),f=Math.max(0,h-f);b.rail.drag.ck=
!b.rail.scrollable&&b.railh.scrollable?0<n?"v":!1:b.rail.scrollable&&!b.railh.scrollable?0<f?"h":!1:!1;b.rail.drag.ck||(b.rail.drag.dl="f")}b.opt.touchbehavior&&(b.isiframe&&g.isie)&&(f=b.win.position(),b.rail.drag.x+=f.left,b.rail.drag.y+=f.top);b.hasmoving=!1;b.lastmouseup=!1;b.scrollmom.reset(d.clientX,d.clientY);if(!g.cantouch&&!this.istouchcapable&&!g.hasmstouch){if(!c||!/INPUT|SELECT|TEXTAREA/i.test(c.nodeName))return!b.ispage&&g.hasmousecapture&&c.setCapture(),b.cancelEvent(d);/SUBMIT|CANCEL|BUTTON/i.test(e(c).attr("type"))&&
(pc={tg:c,click:!1},b.preventclick=pc)}}};b.ontouchend=function(d){if(d.pointerType&&2!=d.pointerType)return!1;if(b.rail.drag&&2==b.rail.drag.pt&&(b.scrollmom.doMomentum(),b.rail.drag=!1,b.hasmoving&&(b.hasmoving=!1,b.lastmouseup=!0,b.hideCursor(),g.hasmousecapture&&document.releaseCapture(),!g.cantouch)))return b.cancelEvent(d)};var q=b.opt.touchbehavior&&b.isiframe&&!g.hasmousecapture;b.ontouchmove=function(d,c){if(d.pointerType&&2!=d.pointerType)return!1;if(b.rail.drag&&2==b.rail.drag.pt){if(g.cantouch&&
"undefined"==typeof d.original)return!0;b.hasmoving=!0;b.preventclick&&!b.preventclick.click&&(b.preventclick.click=b.preventclick.tg.onclick||!1,b.preventclick.tg.onclick=b.onpreventclick);d=e.extend({original:d},d);"changedTouches"in d&&(d.clientX=d.changedTouches[0].clientX,d.clientY=d.changedTouches[0].clientY);if(b.forcescreen){var f=d;d={original:d.original?d.original:d};d.clientX=f.screenX;d.clientY=f.screenY}f=ofy=0;if(q&&!c){var n=b.win.position(),f=-n.left;ofy=-n.top}var h=d.clientY+ofy,
n=h-b.rail.drag.y,l=d.clientX+f,k=l-b.rail.drag.x,r=b.rail.drag.st-n;b.ishwscroll&&b.opt.bouncescroll?0>r?r=Math.round(r/2):r>b.page.maxh&&(r=b.page.maxh+Math.round((r-b.page.maxh)/2)):(0>r&&(h=r=0),r>b.page.maxh&&(r=b.page.maxh,h=0));if(b.railh&&b.railh.scrollable){var m=b.rail.drag.sl-k;b.ishwscroll&&b.opt.bouncescroll?0>m?m=Math.round(m/2):m>b.page.maxw&&(m=b.page.maxw+Math.round((m-b.page.maxw)/2)):(0>m&&(l=m=0),m>b.page.maxw&&(m=b.page.maxw,l=0))}f=!1;if(b.rail.drag.dl)f=!0,"v"==b.rail.drag.dl?
m=b.rail.drag.sl:"h"==b.rail.drag.dl&&(r=b.rail.drag.st);else{var n=Math.abs(n),k=Math.abs(k),p=b.opt.directionlockdeadzone;if("v"==b.rail.drag.ck){if(n>p&&k<=0.3*n)return b.rail.drag=!1,!0;k>p&&(b.rail.drag.dl="f",e("body").scrollTop(e("body").scrollTop()))}else if("h"==b.rail.drag.ck){if(k>p&&n<=0.3*az)return b.rail.drag=!1,!0;n>p&&(b.rail.drag.dl="f",e("body").scrollLeft(e("body").scrollLeft()))}}b.synched("touchmove",function(){b.rail.drag&&2==b.rail.drag.pt&&(b.prepareTransition&&b.prepareTransition(0),
b.rail.scrollable&&b.setScrollTop(r),b.scrollmom.update(l,h),b.railh&&b.railh.scrollable?(b.setScrollLeft(m),b.showCursor(r,m)):b.showCursor(r),g.isie10&&document.selection.clear())});g.ischrome&&b.istouchcapable&&(f=!1);if(f)return b.cancelEvent(d)}}}g.cantouch||b.opt.touchbehavior?(b.onpreventclick=function(d){if(b.preventclick)return b.preventclick.tg.onclick=b.preventclick.click,b.preventclick=!1,b.cancelEvent(d)},b.onmousedown=b.ontouchstart,b.onmouseup=b.ontouchend,b.onclick=g.isios?!1:function(d){return b.lastmouseup?
(b.lastmouseup=!1,b.cancelEvent(d)):!0},b.onmousemove=b.ontouchmove,g.cursorgrabvalue&&(b.css(b.ispage?b.doc:b.win,{cursor:g.cursorgrabvalue}),b.css(b.rail,{cursor:g.cursorgrabvalue}))):(b.onmousedown=function(d,c){if(!(b.rail.drag&&1!=b.rail.drag.pt)){if(b.locked)return b.cancelEvent(d);b.cancelScroll();b.rail.drag={x:d.clientX,y:d.clientY,sx:b.scroll.x,sy:b.scroll.y,pt:1,hr:!!c};var f=b.getTarget(d);!b.ispage&&g.hasmousecapture&&f.setCapture();b.isiframe&&!g.hasmousecapture&&(b.saved.csspointerevents=
b.doc.css("pointer-events"),b.css(b.doc,{"pointer-events":"none"}));return b.cancelEvent(d)}},b.onmouseup=function(d){if(b.rail.drag&&(g.hasmousecapture&&document.releaseCapture(),b.isiframe&&!g.hasmousecapture&&b.doc.css("pointer-events",b.saved.csspointerevents),1==b.rail.drag.pt))return b.rail.drag=!1,b.cancelEvent(d)},b.onmousemove=function(d){if(b.rail.drag&&1==b.rail.drag.pt){if(g.ischrome&&0==d.which)return b.onmouseup(d);b.cursorfreezed=!0;if(b.rail.drag.hr){b.scroll.x=b.rail.drag.sx+(d.clientX-
b.rail.drag.x);0>b.scroll.x&&(b.scroll.x=0);var c=b.scrollvaluemaxw;b.scroll.x>c&&(b.scroll.x=c)}else b.scroll.y=b.rail.drag.sy+(d.clientY-b.rail.drag.y),0>b.scroll.y&&(b.scroll.y=0),c=b.scrollvaluemax,b.scroll.y>c&&(b.scroll.y=c);b.synched("mousemove",function(){b.rail.drag&&1==b.rail.drag.pt&&(b.showCursor(),b.rail.drag.hr?b.doScrollLeft(Math.round(b.scroll.x*b.scrollratio.x)):b.doScrollTop(Math.round(b.scroll.y*b.scrollratio.y)))});return b.cancelEvent(d)}});(g.cantouch||b.opt.touchbehavior)&&
b.bind(b.win,"mousedown",b.onmousedown);g.hasmstouch&&(b.css(b.rail,{"-ms-touch-action":"none"}),b.css(b.cursor,{"-ms-touch-action":"none"}),b.bind(b.win,"MSPointerDown",b.ontouchstart),b.bind(document,"MSPointerUp",b.ontouchend),b.bind(document,"MSPointerMove",b.ontouchmove),b.bind(b.cursor,"MSGestureHold",function(b){b.preventDefault()}),b.bind(b.cursor,"contextmenu",function(b){b.preventDefault()}));this.istouchcapable&&(b.bind(b.win,"touchstart",b.ontouchstart),b.bind(document,"touchend",b.ontouchend),
b.bind(document,"touchcancel",b.ontouchend),b.bind(document,"touchmove",b.ontouchmove));b.bind(b.cursor,"mousedown",b.onmousedown);b.bind(b.cursor,"mouseup",b.onmouseup);b.railh&&(b.bind(b.cursorh,"mousedown",function(d){b.onmousedown(d,!0)}),b.bind(b.cursorh,"mouseup",function(d){if(!(b.rail.drag&&2==b.rail.drag.pt))return b.rail.drag=!1,b.hasmoving=!1,b.hideCursor(),g.hasmousecapture&&document.releaseCapture(),b.cancelEvent(d)}));b.bind(document,"mouseup",b.onmouseup);g.hasmousecapture&&b.bind(b.win,
"mouseup",b.onmouseup);b.bind(document,"mousemove",b.onmousemove);b.onclick&&b.bind(document,"click",b.onclick);!g.cantouch&&!b.opt.touchbehavior&&(b.jqbind(b.rail,"mouseenter",function(){b.canshowonmouseevent&&b.showCursor();b.rail.active=!0}),b.jqbind(b.rail,"mouseleave",function(){b.rail.active=!1;b.rail.drag||b.hideCursor()}),b.opt.sensitiverail&&(b.bind(b.rail,"click",function(d){b.doRailClick(d,!1,!1)}),b.bind(b.rail,"dblclick",function(d){b.doRailClick(d,!0,!1)}),b.bind(b.cursor,"click",function(d){b.cancelEvent(d)}),
b.bind(b.cursor,"dblclick",function(d){b.cancelEvent(d)})),b.railh&&(b.jqbind(b.railh,"mouseenter",function(){b.canshowonmouseevent&&b.showCursor();b.rail.active=!0}),b.jqbind(b.railh,"mouseleave",function(){b.rail.active=!1;b.rail.drag||b.hideCursor()}),b.opt.sensitiverail&&(b.bind(b.railh,"click",function(d){b.doRailClick(d,!1,!0)}),b.bind(b.railh,"dblclick",function(d){b.doRailClick(d,!0,!0)}),b.bind(b.cursorh,"click",function(d){b.cancelEvent(d)}),b.bind(b.cursorh,"dblclick",function(d){b.cancelEvent(d)}))),
b.zoom&&(b.jqbind(b.zoom,"mouseenter",function(){b.canshowonmouseevent&&b.showCursor();b.rail.active=!0}),b.jqbind(b.zoom,"mouseleave",function(){b.rail.active=!1;b.rail.drag||b.hideCursor()})));b.opt.enablemousewheel&&(b.isiframe||b.bind(g.isie&&b.ispage?document:b.docscroll,"mousewheel",b.onmousewheel),b.bind(b.rail,"mousewheel",b.onmousewheel),b.railh&&b.bind(b.railh,"mousewheel",b.onmousewheelhr));!b.ispage&&(!g.cantouch&&!/HTML|BODY/.test(b.win[0].nodeName))&&(b.win.attr("tabindex")||b.win.attr({tabindex:G++}),
b.jqbind(b.win,"focus",function(d){w=b.getTarget(d).id||!0;b.hasfocus=!0;b.canshowonmouseevent&&b.noticeCursor()}),b.jqbind(b.win,"blur",function(d){w=!1;b.hasfocus=!1}),b.jqbind(b.win,"mouseenter",function(d){A=b.getTarget(d).id||!0;b.hasmousefocus=!0;b.canshowonmouseevent&&b.noticeCursor()}),b.jqbind(b.win,"mouseleave",function(){A=!1;b.hasmousefocus=!1}))}b.onkeypress=function(d){if(b.locked&&0==b.page.maxh)return!0;d=d?d:window.e;var c=b.getTarget(d);if(c&&/INPUT|TEXTAREA|SELECT|OPTION/.test(c.nodeName)&&
(!c.getAttribute("type")&&!c.type||!/submit|button|cancel/i.tp))return!0;if(b.hasfocus||b.hasmousefocus&&!w||b.ispage&&!w&&!A){c=d.keyCode;if(b.locked&&27!=c)return b.cancelEvent(d);var f=d.ctrlKey||!1,n=d.shiftKey||!1,e=!1;switch(c){case 38:case 63233:b.doScrollBy(72);e=!0;break;case 40:case 63235:b.doScrollBy(-72);e=!0;break;case 37:case 63232:b.railh&&(f?b.doScrollLeft(0):b.doScrollLeftBy(72),e=!0);break;case 39:case 63234:b.railh&&(f?b.doScrollLeft(b.page.maxw):b.doScrollLeftBy(-72),e=!0);break;
case 33:case 63276:b.doScrollBy(b.view.h);e=!0;break;case 34:case 63277:b.doScrollBy(-b.view.h);e=!0;break;case 36:case 63273:b.railh&&f?b.doScrollPos(0,0):b.doScrollTo(0);e=!0;break;case 35:case 63275:b.railh&&f?b.doScrollPos(b.page.maxw,b.page.maxh):b.doScrollTo(b.page.maxh);e=!0;break;case 32:b.opt.spacebarenabled&&(n?b.doScrollBy(b.view.h):b.doScrollBy(-b.view.h),e=!0);break;case 27:b.zoomactive&&(b.doZoom(),e=!0)}if(e)return b.cancelEvent(d)}};b.opt.enablekeyboard&&b.bind(document,g.isopera&&
!g.isopera12?"keypress":"keydown",b.onkeypress);b.bind(window,"resize",b.lazyResize);b.bind(window,"orientationchange",b.lazyResize);b.bind(window,"load",b.lazyResize);if(g.ischrome&&!b.ispage&&!b.haswrapper){var s=b.win.attr("style"),f=parseFloat(b.win.css("width"))+1;b.win.css("width",f);b.synched("chromefix",function(){b.win.attr("style",s)})}b.onAttributeChange=function(d){b.lazyResize(250)};!b.ispage&&!b.haswrapper&&("WebKitMutationObserver"in window?(b.observer=new WebKitMutationObserver(function(d){d.forEach(b.onAttributeChange)}),
b.observer.observe(b.win[0],{attributes:!0,subtree:!1})):(b.bind(b.win,g.isie&&!g.isie9?"propertychange":"DOMAttrModified",b.onAttributeChange),g.isie9&&b.win[0].attachEvent("onpropertychange",b.onAttributeChange)));!b.ispage&&b.opt.boxzoom&&b.bind(window,"resize",b.resizeZoom);b.istextarea&&b.bind(b.win,"mouseup",b.lazyResize);b.lazyResize(30)}if("IFRAME"==this.doc[0].nodeName){var F=function(d){b.iframexd=!1;try{var c="contentDocument"in this?this.contentDocument:this.contentWindow.document}catch(f){b.iframexd=
!0,c=!1}if(b.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;b.forcescreen=!0;b.isiframe&&(b.iframe={doc:e(c),html:b.doc.contents().find("html")[0],body:b.doc.contents().find("body")[0]},b.getContentSize=function(){return{w:Math.max(b.iframe.html.scrollWidth,b.iframe.body.scrollWidth),h:Math.max(b.iframe.html.scrollHeight,b.iframe.body.scrollHeight)}},b.docscroll=e(b.iframe.body));!g.isios&&(b.opt.iframeautoresize&&!b.isiframe)&&(b.win.scrollTop(0),b.doc.height(""),
d=Math.max(c.getElementsByTagName("html")[0].scrollHeight,c.body.scrollHeight),b.doc.height(d));b.lazyResize(30);g.isie7&&b.css(e(b.iframe.html),{"overflow-y":"hidden"});b.css(e(b.iframe.body),{"overflow-y":"hidden"});"contentWindow"in this?b.bind(this.contentWindow,"scroll",b.onscroll):b.bind(c,"scroll",b.onscroll);b.opt.enablemousewheel&&b.bind(c,"mousewheel",b.onmousewheel);b.opt.enablekeyboard&&b.bind(c,g.isopera?"keypress":"keydown",b.onkeypress);if(g.cantouch||b.opt.touchbehavior)b.bind(c,"mousedown",
b.onmousedown),b.bind(c,"mousemove",function(d){b.onmousemove(d,!0)}),g.cursorgrabvalue&&b.css(e(c.body),{cursor:g.cursorgrabvalue});b.bind(c,"mouseup",b.onmouseup);b.zoom&&(b.opt.dblclickzoom&&b.bind(c,"dblclick",b.doZoom),b.ongesturezoom&&b.bind(c,"gestureend",b.ongesturezoom))};this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){F.call(b.doc[0],!1)},500);b.bind(this.doc,"load",F)}};this.showCursor=function(d,c){b.cursortimeout&&(clearTimeout(b.cursortimeout),b.cursortimeout=
0);b.rail&&(b.autohidedom&&(b.autohidedom.stop().css({opacity:b.opt.cursoropacitymax}),b.cursoractive=!0),"undefined"!=typeof d&&!1!==d&&(b.scroll.y=Math.round(1*d/b.scrollratio.y)),"undefined"!=typeof c&&(b.scroll.x=Math.round(1*c/b.scrollratio.x)),b.cursor.css({height:b.cursorheight,top:b.scroll.y}),b.cursorh&&(!b.rail.align&&b.rail.visibility?b.cursorh.css({width:b.cursorwidth,left:b.scroll.x+b.rail.width}):b.cursorh.css({width:b.cursorwidth,left:b.scroll.x}),b.cursoractive=!0),b.zoom&&b.zoom.stop().css({opacity:b.opt.cursoropacitymax}))};
this.hideCursor=function(d){!b.cursortimeout&&(b.rail&&b.autohidedom)&&(b.cursortimeout=setTimeout(function(){if(!b.rail.active||!b.showonmouseevent)b.autohidedom.stop().animate({opacity:b.opt.cursoropacitymin}),b.zoom&&b.zoom.stop().animate({opacity:b.opt.cursoropacitymin}),b.cursoractive=!1;b.cursortimeout=0},d||b.opt.hidecursordelay))};this.noticeCursor=function(d,c,f){b.showCursor(c,f);b.rail.active||b.hideCursor(d)};this.getContentSize=b.ispage?function(){return{w:Math.max(document.body.scrollWidth,
document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:b.haswrapper?function(){return{w:b.doc.outerWidth()+parseInt(b.win.css("paddingLeft"))+parseInt(b.win.css("paddingRight")),h:b.doc.outerHeight()+parseInt(b.win.css("paddingTop"))+parseInt(b.win.css("paddingBottom"))}}:function(){return{w:b.docscroll[0].scrollWidth,h:b.docscroll[0].scrollHeight}};this.onResize=function(d,c){if(!b.win)return!1;if(!b.haswrapper&&!b.ispage){if("none"==
b.win.css("display"))return b.visibility&&b.hideRail().hideRailHr(),!1;!b.hidden&&!b.visibility&&b.showRail().showRailHr()}var f=b.page.maxh,e=b.page.maxw,g=b.view.w;b.view={w:b.ispage?b.win.width():parseInt(b.win[0].clientWidth),h:b.ispage?b.win.height():parseInt(b.win[0].clientHeight)};b.page=c?c:b.getContentSize();b.page.maxh=Math.max(0,b.page.h-b.view.h);b.page.maxw=Math.max(0,b.page.w-b.view.w);if(b.page.maxh==f&&b.page.maxw==e&&b.view.w==g){if(b.ispage)return b;f=b.win.offset();if(b.lastposition&&
(e=b.lastposition,e.top==f.top&&e.left==f.left))return b;b.lastposition=f}0==b.page.maxh?(b.hideRail(),b.scrollvaluemax=0,b.scroll.y=0,b.scrollratio.y=0,b.cursorheight=0,b.setScrollTop(0),b.rail.scrollable=!1):b.rail.scrollable=!0;0==b.page.maxw?(b.hideRailHr(),b.scrollvaluemaxw=0,b.scroll.x=0,b.scrollratio.x=0,b.cursorwidth=0,b.setScrollLeft(0),b.railh.scrollable=!1):b.railh.scrollable=!0;b.locked=0==b.page.maxh&&0==b.page.maxw;if(b.locked)return b.ispage||b.updateScrollBar(b.view),!1;!b.hidden&&
!b.visibility?b.showRail().showRailHr():!b.hidden&&!b.railh.visibility&&b.showRailHr();b.istextarea&&(b.win.css("resize")&&"none"!=b.win.css("resize"))&&(b.view.h-=20);b.cursorheight=Math.min(b.view.h,Math.round(b.view.h*(b.view.h/b.page.h)));b.cursorheight=b.opt.cursorfixedheight?b.opt.cursorfixedheight:Math.max(b.opt.cursorminheight,b.cursorheight);b.cursorwidth=Math.min(b.view.w,Math.round(b.view.w*(b.view.w/b.page.w)));b.cursorwidth=b.opt.cursorfixedheight?b.opt.cursorfixedheight:Math.max(b.opt.cursorminheight,
b.cursorwidth);b.scrollvaluemax=b.view.h-b.cursorheight-b.cursor.hborder;b.railh&&(b.railh.width=0<b.page.maxh?b.view.w-b.rail.width:b.view.w,b.scrollvaluemaxw=b.railh.width-b.cursorwidth-b.cursorh.wborder);b.ispage||b.updateScrollBar(b.view);b.scrollratio={x:b.page.maxw/b.scrollvaluemaxw,y:b.page.maxh/b.scrollvaluemax};b.getScrollTop()>b.page.maxh?b.doScrollTop(b.page.maxh):(b.scroll.y=Math.round(b.getScrollTop()*(1/b.scrollratio.y)),b.scroll.x=Math.round(b.getScrollLeft()*(1/b.scrollratio.x)),b.cursoractive&&
b.noticeCursor());b.scroll.y&&0==b.getScrollTop()&&b.doScrollTo(Math.floor(b.scroll.y*b.scrollratio.y));return b};this.resize=b.onResize;this.lazyResize=function(d){d=isNaN(d)?30:d;b.delayed("resize",b.resize,d);return b};this._bind=function(d,c,f,e){b.events.push({e:d,n:c,f:f,b:e,q:!1});d.addEventListener?d.addEventListener(c,f,e||!1):d.attachEvent?d.attachEvent("on"+c,f):d["on"+c]=f};this.jqbind=function(d,c,f){b.events.push({e:d,n:c,f:f,q:!0});e(d).bind(c,f)};this.bind=function(d,c,f,e){var h=
"jquery"in d?d[0]:d;h.addEventListener?(g.cantouch&&/mouseup|mousedown|mousemove/.test(c)&&b._bind(h,"mousedown"==c?"touchstart":"mouseup"==c?"touchend":"touchmove",function(b){if(b.touches){if(2>b.touches.length){var d=b.touches.length?b.touches[0]:b;d.original=b;f.call(this,d)}}else b.changedTouches&&(d=b.changedTouches[0],d.original=b,f.call(this,d))},e||!1),b._bind(h,c,f,e||!1),"mousewheel"==c&&b._bind(h,"DOMMouseScroll",f,e||!1),g.cantouch&&"mouseup"==c&&b._bind(h,"touchcancel",f,e||!1)):b._bind(h,
c,function(d){if((d=d||window.event||!1)&&d.srcElement)d.target=d.srcElement;return!1===f.call(h,d)||!1===e?b.cancelEvent(d):!0})};this._unbind=function(b,c,f,e){b.removeEventListener?b.removeEventListener(c,f,e):b.detachEvent?b.detachEvent("on"+c,f):b["on"+c]=!1};this.unbindAll=function(){for(var d=0;d<b.events.length;d++){var c=b.events[d];c.q?c.e.unbind(c.n,c.f):b._unbind(c.e,c.n,c.f,c.b)}};this.cancelEvent=function(b){b=b.original?b.original:b?b:window.event||!1;if(!b)return!1;b.preventDefault&&
b.preventDefault();b.stopPropagation&&b.stopPropagation();b.preventManipulation&&b.preventManipulation();b.cancelBubble=!0;b.cancel=!0;return b.returnValue=!1};this.stopPropagation=function(b){b=b.original?b.original:b?b:window.event||!1;if(!b)return!1;if(b.stopPropagation)return b.stopPropagation();b.cancelBubble&&(b.cancelBubble=!0);return!1};this.showRail=function(){if(0!=b.page.maxh&&(b.ispage||"none"!=b.win.css("display")))b.visibility=!0,b.rail.visibility=!0,b.rail.css("display","block");return b};
this.showRailHr=function(){if(!b.railh)return b;if(0!=b.page.maxw&&(b.ispage||"none"!=b.win.css("display")))b.railh.visibility=!0,b.railh.css("display","block");return b};this.hideRail=function(){b.visibility=!1;b.rail.visibility=!1;b.rail.css("display","none");return b};this.hideRailHr=function(){if(!b.railh)return b;b.railh.visibility=!1;b.railh.css("display","none");return b};this.show=function(){b.hidden=!1;b.locked=!1;return b.showRail().showRailHr()};this.hide=function(){b.hidden=!0;b.locked=
!0;return b.hideRail().hideRailHr()};this.toggle=function(){return b.hidden?b.show():b.hide()};this.remove=function(){b.stop();b.cursortimeout&&clearTimeout(b.cursortimeout);b.doZoomOut();b.unbindAll();!1!==b.observer&&b.observer.disconnect();b.events=[];b.cursor&&(b.cursor.remove(),b.cursor=null);b.cursorh&&(b.cursorh.remove(),b.cursorh=null);b.rail&&(b.rail.remove(),b.rail=null);b.railh&&(b.railh.remove(),b.railh=null);b.zoom&&(b.zoom.remove(),b.zoom=null);for(var d=0;d<b.saved.css.length;d++){var c=
b.saved.css[d];c[0].css(c[1],"undefined"==typeof c[2]?"":c[2])}b.saved=!1;b.me.data("__nicescroll","");b.me=null;b.doc=null;b.docscroll=null;b.win=null;return b};this.scrollstart=function(d){this.onscrollstart=d;return b};this.scrollend=function(d){this.onscrollend=d;return b};this.scrollcancel=function(d){this.onscrollcancel=d;return b};this.zoomin=function(d){this.onzoomin=d;return b};this.zoomout=function(d){this.onzoomout=d;return b};this.isScrollable=function(b){b=b.target?b.target:b;if("OPTION"==
b.nodeName)return!0;for(;b&&1==b.nodeType&&!/BODY|HTML/.test(b.nodeName);){var c=e(b),c=c.css("overflowY")||c.css("overflowX")||c.css("overflow")||"";if(/scroll|auto/.test(c))return b.clientHeight!=b.scrollHeight;b=b.parentNode?b.parentNode:!1}return!1};this.getViewport=function(b){for(b=b&&b.parentNode?b.parentNode:!1;b&&1==b.nodeType&&!/BODY|HTML/.test(b.nodeName);){var c=e(b),f=c.css("overflowY")||c.css("overflowX")||c.css("overflow")||"";if(/scroll|auto/.test(f)&&b.clientHeight!=b.scrollHeight||
0<c.getNiceScroll().length)return c;b=b.parentNode?b.parentNode:!1}return!1};this.onmousewheel=function(c){if(b.locked)return!0;if(b.rail.drag)return b.cancelEvent(c);if(!b.rail.scrollable)return b.railh&&b.railh.scrollable?b.onmousewheelhr(c):!0;var e=+new Date,f=!1;b.opt.preservenativescrolling&&b.checkarea+600<e&&(b.nativescrollingarea=b.isScrollable(c),f=!0);b.checkarea=e;if(b.nativescrollingarea)return!0;if(c=p(c,!1,f))b.checkarea=0;return c};this.onmousewheelhr=function(c){if(b.locked||!b.railh.scrollable)return!0;
if(b.rail.drag)return b.cancelEvent(c);var e=+new Date,f=!1;b.opt.preservenativescrolling&&b.checkarea+600<e&&(b.nativescrollingarea=b.isScrollable(c),f=!0);b.checkarea=e;return b.nativescrollingarea?!0:b.locked?b.cancelEvent(c):p(c,!0,f)};this.stop=function(){b.cancelScroll();b.scrollmon&&b.scrollmon.stop();b.cursorfreezed=!1;b.scroll.y=Math.round(b.getScrollTop()*(1/b.scrollratio.y));b.noticeCursor();return b};this.getTransitionSpeed=function(c){var e=Math.round(10*b.opt.scrollspeed);c=Math.min(e,
Math.round(c/20*b.opt.scrollspeed));return 20<c?c:0};b.opt.smoothscroll?b.ishwscroll&&g.hastransition&&b.opt.usetransition?(this.prepareTransition=function(c,e){var f=e?20<c?c:0:b.getTransitionSpeed(c),h=f?g.prefixstyle+"transform "+f+"ms ease-out":"";if(!b.lasttransitionstyle||b.lasttransitionstyle!=h)b.lasttransitionstyle=h,b.doc.css(g.transitionstyle,h);return f},this.doScrollLeft=function(c,e){var f=b.scrollrunning?b.newscrolly:b.getScrollTop();b.doScrollPos(c,f,e)},this.doScrollTop=function(c,
e){var f=b.scrollrunning?b.newscrollx:b.getScrollLeft();b.doScrollPos(f,c,e)},this.doScrollPos=function(c,e,f){var h=b.getScrollTop(),l=b.getScrollLeft();(0>(b.newscrolly-h)*(e-h)||0>(b.newscrollx-l)*(c-l))&&b.cancelScroll();!1==b.opt.bouncescroll&&(0>e?e=0:e>b.page.maxh&&(e=b.page.maxh),0>c?c=0:c>b.page.maxw&&(c=b.page.maxw));if(c==b.newscrollx&&e==b.newscrolly)return!1;b.newscrolly=e;b.newscrollx=c;b.newscrollspeed=f||!1;if(b.timer)return!1;b.timer=setTimeout(function(){var f=b.getScrollTop(),h=
b.getScrollLeft(),l,k;l=c-h;k=e-f;l=Math.round(Math.sqrt(Math.pow(l,2)+Math.pow(k,2)));l=b.prepareTransition(b.newscrollspeed?b.newscrollspeed:l);b.timerscroll&&b.timerscroll.tm&&clearInterval(b.timerscroll.tm);0<l&&(!b.scrollrunning&&b.onscrollstart&&b.onscrollstart.call(b,{type:"scrollstart",current:{x:h,y:f},request:{x:c,y:e},end:{x:b.newscrollx,y:b.newscrolly},speed:l}),g.transitionend?b.scrollendtrapped||(b.scrollendtrapped=!0,b.bind(b.doc,g.transitionend,b.onScrollEnd,!1)):(b.scrollendtrapped&&
clearTimeout(b.scrollendtrapped),b.scrollendtrapped=setTimeout(b.onScrollEnd,l)),b.timerscroll={bz:new BezierClass(f,b.newscrolly,l,0,0,0.58,1),bh:new BezierClass(h,b.newscrollx,l,0,0,0.58,1)},b.cursorfreezed||(b.timerscroll.tm=setInterval(function(){b.showCursor(b.getScrollTop(),b.getScrollLeft())},60)));b.synched("doScroll-set",function(){b.timer=0;b.scrollendtrapped&&(b.scrollrunning=!0);b.setScrollTop(b.newscrolly);b.setScrollLeft(b.newscrollx);if(!b.scrollendtrapped)b.onScrollEnd()})},50)},this.cancelScroll=
function(){if(!b.scrollendtrapped)return!0;var c=b.getScrollTop(),e=b.getScrollLeft();b.scrollrunning=!1;g.transitionend||clearTimeout(g.transitionend);b.scrollendtrapped=!1;b._unbind(b.doc,g.transitionend,b.onScrollEnd);b.prepareTransition(0);b.setScrollTop(c);b.railh&&b.setScrollLeft(e);b.timerscroll&&b.timerscroll.tm&&clearInterval(b.timerscroll.tm);b.timerscroll=!1;b.cursorfreezed=!1;b.showCursor(c,e);return b},this.onScrollEnd=function(){b.scrollendtrapped&&b._unbind(b.doc,g.transitionend,b.onScrollEnd);
b.scrollendtrapped=!1;b.prepareTransition(0);b.timerscroll&&b.timerscroll.tm&&clearInterval(b.timerscroll.tm);b.timerscroll=!1;var c=b.getScrollTop(),e=b.getScrollLeft();b.setScrollTop(c);b.railh&&b.setScrollLeft(e);b.noticeCursor(!1,c,e);b.cursorfreezed=!1;0>c?c=0:c>b.page.maxh&&(c=b.page.maxh);0>e?e=0:e>b.page.maxw&&(e=b.page.maxw);if(c!=b.newscrolly||e!=b.newscrollx)return b.doScrollPos(e,c,b.opt.snapbackspeed);b.onscrollend&&b.scrollrunning&&b.onscrollend.call(b,{type:"scrollend",current:{x:e,
y:c},end:{x:b.newscrollx,y:b.newscrolly}});b.scrollrunning=!1}):(this.doScrollLeft=function(c){var e=b.scrollrunning?b.newscrolly:b.getScrollTop();b.doScrollPos(c,e)},this.doScrollTop=function(c){var e=b.scrollrunning?b.newscrollx:b.getScrollLeft();b.doScrollPos(e,c)},this.doScrollPos=function(c,e){function f(){if(b.cancelAnimationFrame)return!0;b.scrollrunning=!0;if(q=1-q)return b.timer=u(f)||1;var c=0,d=sy=b.getScrollTop();if(b.dst.ay){var d=b.bzscroll?b.dst.py+b.bzscroll.getNow()*b.dst.ay:b.newscrolly,
e=d-sy;if(0>e&&d<b.newscrolly||0<e&&d>b.newscrolly)d=b.newscrolly;b.setScrollTop(d);d==b.newscrolly&&(c=1)}else c=1;var g=sx=b.getScrollLeft();if(b.dst.ax){g=b.bzscroll?b.dst.px+b.bzscroll.getNow()*b.dst.ax:b.newscrollx;e=g-sx;if(0>e&&g<b.newscrollx||0<e&&g>b.newscrollx)g=b.newscrollx;b.setScrollLeft(g);g==b.newscrollx&&(c+=1)}else c+=1;2==c?(b.timer=0,b.cursorfreezed=!1,b.bzscroll=!1,b.scrollrunning=!1,0>d?d=0:d>b.page.maxh&&(d=b.page.maxh),0>g?g=0:g>b.page.maxw&&(g=b.page.maxw),g!=b.newscrollx||
d!=b.newscrolly?b.doScrollPos(g,d):b.onscrollend&&b.onscrollend.call(b,{type:"scrollend",current:{x:sx,y:sy},end:{x:b.newscrollx,y:b.newscrolly}})):b.timer=u(f)||1}e="undefined"==typeof e||!1===e?b.getScrollTop(!0):e;if(b.timer&&b.newscrolly==e&&b.newscrollx==c)return!0;b.timer&&v(b.timer);b.timer=0;var g=b.getScrollTop(),h=b.getScrollLeft();(0>(b.newscrolly-g)*(e-g)||0>(b.newscrollx-h)*(c-h))&&b.cancelScroll();b.newscrolly=e;b.newscrollx=c;if(!b.bouncescroll||!b.rail.visibility)0>b.newscrolly?b.newscrolly=
0:b.newscrolly>b.page.maxh&&(b.newscrolly=b.page.maxh);if(!b.bouncescroll||!b.railh.visibility)0>b.newscrollx?b.newscrollx=0:b.newscrollx>b.page.maxw&&(b.newscrollx=b.page.maxw);b.dst={};b.dst.x=c-h;b.dst.y=e-g;b.dst.px=h;b.dst.py=g;var l=Math.round(Math.sqrt(Math.pow(b.dst.x,2)+Math.pow(b.dst.y,2)));b.dst.ax=b.dst.x/l;b.dst.ay=b.dst.y/l;var k=0,p=l;0==b.dst.x?(k=g,p=e,b.dst.ay=1,b.dst.py=0):0==b.dst.y&&(k=h,p=c,b.dst.ax=1,b.dst.px=0);l=b.getTransitionSpeed(l);b.bzscroll=0<l?b.bzscroll?b.bzscroll.update(p,
l):new BezierClass(k,p,l,0,1,0,1):!1;if(!b.timer){(g==b.page.maxh&&e>=b.page.maxh||h==b.page.maxw&&c>=b.page.maxw)&&b.checkContentSize();var q=1;b.cancelAnimationFrame=!1;b.timer=1;b.onscrollstart&&!b.scrollrunning&&b.onscrollstart.call(b,{type:"scrollstart",current:{x:h,y:g},request:{x:c,y:e},end:{x:b.newscrollx,y:b.newscrolly},speed:l});f();(g==b.page.maxh&&e>=g||h==b.page.maxw&&c>=h)&&b.checkContentSize();b.noticeCursor()}},this.cancelScroll=function(){b.timer&&v(b.timer);b.timer=0;b.bzscroll=
!1;b.scrollrunning=!1;return b}):(this.doScrollLeft=function(c,e){var f=b.getScrollTop();b.doScrollPos(c,f,e)},this.doScrollTop=function(c,e){var f=b.getScrollLeft();b.doScrollPos(f,c,e)},this.doScrollPos=function(c,e,f){var g=c>b.page.maxw?b.page.maxw:c;0>g&&(g=0);var h=e>b.page.maxh?b.page.maxh:e;0>h&&(h=0);b.synched("scroll",function(){b.setScrollTop(h);b.setScrollLeft(g)})},this.cancelScroll=function(){});this.doScrollBy=function(c,e){var f=0,f=e?Math.floor((b.scroll.y-c)*b.scrollratio.y):(b.timer?
b.newscrolly:b.getScrollTop(!0))-c;if(b.bouncescroll){var g=Math.round(b.view.h/2);f<-g?f=-g:f>b.page.maxh+g&&(f=b.page.maxh+g)}b.cursorfreezed=!1;py=b.getScrollTop(!0);if(0>f&&0>=py)return b.noticeCursor();if(f>b.page.maxh&&py>=b.page.maxh)return b.checkContentSize(),b.noticeCursor();b.doScrollTop(f)};this.doScrollLeftBy=function(c,e){var f=0,f=e?Math.floor((b.scroll.x-c)*b.scrollratio.x):(b.timer?b.newscrollx:b.getScrollLeft(!0))-c;if(b.bouncescroll){var g=Math.round(b.view.w/2);f<-g?f=-g:f>b.page.maxw+
g&&(f=b.page.maxw+g)}b.cursorfreezed=!1;px=b.getScrollLeft(!0);if(0>f&&0>=px||f>b.page.maxw&&px>=b.page.maxw)return b.noticeCursor();b.doScrollLeft(f)};this.doScrollTo=function(c,e){e&&Math.round(c*b.scrollratio.y);b.cursorfreezed=!1;b.doScrollTop(c)};this.checkContentSize=function(){var c=b.getContentSize();(c.h!=b.page.h||c.w!=b.page.w)&&b.resize(!1,c)};b.onscroll=function(c){b.rail.drag||b.cursorfreezed||b.synched("scroll",function(){b.scroll.y=Math.round(b.getScrollTop()*(1/b.scrollratio.y));
b.railh&&(b.scroll.x=Math.round(b.getScrollLeft()*(1/b.scrollratio.x)));b.noticeCursor()})};b.bind(b.docscroll,"scroll",b.onscroll);this.doZoomIn=function(c){if(!b.zoomactive){b.zoomactive=!0;b.zoomrestore={style:{}};var h="position top left zIndex backgroundColor marginTop marginBottom marginLeft marginRight".split(" "),f=b.win[0].style,l;for(l in h){var k=h[l];b.zoomrestore.style[k]="undefined"!=typeof f[k]?f[k]:""}b.zoomrestore.style.width=b.win.css("width");b.zoomrestore.style.height=b.win.css("height");
b.zoomrestore.padding={w:b.win.outerWidth()-b.win.width(),h:b.win.outerHeight()-b.win.height()};g.isios4&&(b.zoomrestore.scrollTop=e(window).scrollTop(),e(window).scrollTop(0));b.win.css({position:g.isios4?"absolute":"fixed",top:0,left:0,"z-index":parseInt(b.zindex)+100,margin:"0px"});h=b.win.css("backgroundColor");(""==h||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(h))&&b.win.css("backgroundColor","#fff");b.rail.css({"z-index":parseInt(b.zindex)+110});b.zoom.css({"z-index":parseInt(b.zindex)+
112});b.zoom.css("backgroundPosition","0px -18px");b.resizeZoom();b.onzoomin&&b.onzoomin.call(b);return b.cancelEvent(c)}};this.doZoomOut=function(c){if(b.zoomactive)return b.zoomactive=!1,b.win.css("margin",""),b.win.css(b.zoomrestore.style),g.isios4&&e(window).scrollTop(b.zoomrestore.scrollTop),b.rail.css({"z-index":b.zindex}),b.zoom.css({"z-index":b.zindex}),b.zoomrestore=!1,b.zoom.css("backgroundPosition","0px 0px"),b.onResize(),b.onzoomout&&b.onzoomout.call(b),b.cancelEvent(c)};this.doZoom=function(c){return b.zoomactive?
b.doZoomOut(c):b.doZoomIn(c)};this.resizeZoom=function(){if(b.zoomactive){var c=b.getScrollTop();b.win.css({width:e(window).width()-b.zoomrestore.padding.w+"px",height:e(window).height()-b.zoomrestore.padding.h+"px"});b.onResize();b.setScrollTop(Math.min(b.page.maxh,c))}};this.init();e.nicescroll.push(this)},E=function(e){var c=this;this.nc=e;this.steptime=this.lasttime=this.speedy=this.speedx=this.lasty=this.lastx=0;this.snapy=this.snapx=!1;this.demuly=this.demulx=0;this.lastscrolly=this.lastscrollx=
-1;this.timer=this.chky=this.chkx=0;this.time=function(){return+new Date};this.reset=function(e,l){c.stop();var k=c.time();c.steptime=0;c.lasttime=k;c.speedx=0;c.speedy=0;c.lastx=e;c.lasty=l;c.lastscrollx=-1;c.lastscrolly=-1};this.update=function(e,l){var k=c.time();c.steptime=k-c.lasttime;c.lasttime=k;var k=l-c.lasty,b=e-c.lastx,q=c.nc.getScrollTop(),g=c.nc.getScrollLeft(),q=q+k,g=g+b;c.snapx=0>g||g>c.nc.page.maxw;c.snapy=0>q||q>c.nc.page.maxh;c.speedx=b;c.speedy=k;c.lastx=e;c.lasty=l};this.stop=
function(){c.nc.unsynched("domomentum2d");c.timer&&clearTimeout(c.timer);c.timer=0;c.lastscrollx=-1;c.lastscrolly=-1};this.doSnapy=function(e,l){var k=!1;0>l?(l=0,k=!0):l>c.nc.page.maxh&&(l=c.nc.page.maxh,k=!0);0>e?(e=0,k=!0):e>c.nc.page.maxw&&(e=c.nc.page.maxw,k=!0);k&&c.nc.doScrollPos(e,l,c.nc.opt.snapbackspeed)};this.doMomentum=function(e){var l=c.time(),k=e?l+e:c.lasttime;e=c.nc.getScrollLeft();var b=c.nc.getScrollTop(),q=c.nc.page.maxh,g=c.nc.page.maxw;c.speedx=0<g?Math.min(60,c.speedx):0;c.speedy=
0<q?Math.min(60,c.speedy):0;k=k&&50>=l-k;if(0>b||b>q||0>e||e>g)k=!1;e=c.speedx&&k?c.speedx:!1;if(c.speedy&&k&&c.speedy||e){var t=Math.max(16,c.steptime);50<t&&(e=t/50,c.speedx*=e,c.speedy*=e,t=50);c.demulxy=0;c.lastscrollx=c.nc.getScrollLeft();c.chkx=c.lastscrollx;c.lastscrolly=c.nc.getScrollTop();c.chky=c.lastscrolly;var s=c.lastscrollx,d=c.lastscrolly,n=function(){var b=600<c.time()-l?0.04:0.02;if(c.speedx&&(s=Math.floor(c.lastscrollx-c.speedx*(1-c.demulxy)),c.lastscrollx=s,0>s||s>g))b=0.1;if(c.speedy&&
(d=Math.floor(c.lastscrolly-c.speedy*(1-c.demulxy)),c.lastscrolly=d,0>d||d>q))b=0.1;c.demulxy=Math.min(1,c.demulxy+b);c.nc.synched("domomentum2d",function(){c.speedx&&(c.nc.getScrollLeft()!=c.chkx&&c.stop(),c.chkx=s,c.nc.setScrollLeft(s));c.speedy&&(c.nc.getScrollTop()!=c.chky&&c.stop(),c.chky=d,c.nc.setScrollTop(d));c.timer||(c.nc.hideCursor(),c.doSnapy(s,d))});1>c.demulxy?c.timer=setTimeout(n,t):(c.stop(),c.nc.hideCursor(),c.doSnapy(s,d))};n()}else c.doSnapy(c.nc.getScrollLeft(),c.nc.getScrollTop())}},
x=e.fn.scrollTop;e.cssHooks.pageYOffset={get:function(k,c,h){return(c=e.data(k,"__nicescroll")||!1)&&c.ishwscroll?c.getScrollTop():x.call(k)},set:function(k,c){var h=e.data(k,"__nicescroll")||!1;h&&h.ishwscroll?h.setScrollTop(parseInt(c)):x.call(k,c);return this}};e.fn.scrollTop=function(k){if("undefined"==typeof k){var c=this[0]?e.data(this[0],"__nicescroll")||!1:!1;return c&&c.ishwscroll?c.getScrollTop():x.call(this)}return this.each(function(){var c=e.data(this,"__nicescroll")||!1;c&&c.ishwscroll?
c.setScrollTop(parseInt(k)):x.call(e(this),k)})};var y=e.fn.scrollLeft;e.cssHooks.pageXOffset={get:function(k,c,h){return(c=e.data(k,"__nicescroll")||!1)&&c.ishwscroll?c.getScrollLeft():y.call(k)},set:function(k,c){var h=e.data(k,"__nicescroll")||!1;h&&h.ishwscroll?h.setScrollLeft(parseInt(c)):y.call(k,c);return this}};e.fn.scrollLeft=function(k){if("undefined"==typeof k){var c=this[0]?e.data(this[0],"__nicescroll")||!1:!1;return c&&c.ishwscroll?c.getScrollLeft():y.call(this)}return this.each(function(){var c=
e.data(this,"__nicescroll")||!1;c&&c.ishwscroll?c.setScrollLeft(parseInt(k)):y.call(e(this),k)})};var z=function(k){var c=this;this.length=0;this.name="nicescrollarray";this.each=function(e){for(var h=0;h<c.length;h++)e.call(c[h]);return c};this.push=function(e){c[c.length]=e;c.length++};this.eq=function(e){return c[e]};if(k)for(a=0;a<k.length;a++){var h=e.data(k[a],"__nicescroll")||!1;h&&(this[this.length]=h,this.length++)}return this};(function(e,c,h){for(var l=0;l<c.length;l++)h(e,c[l])})(z.prototype,
"show hide toggle onResize resize remove stop doScrollPos".split(" "),function(e,c){e[c]=function(){var e=arguments;return this.each(function(){this[c].apply(this,e)})}});e.fn.getNiceScroll=function(k){return"undefined"==typeof k?new z(this):e.data(this[k],"__nicescroll")||!1};e.extend(e.expr[":"],{nicescroll:function(k){return e.data(k,"__nicescroll")?!0:!1}});e.fn.niceScroll=function(k,c){"undefined"==typeof c&&("object"==typeof k&&!("jquery"in k))&&(c=k,k=!1);var h=new z;"undefined"==typeof c&&
(c={});k&&(c.doc=e(k),c.win=e(this));var l=!("doc"in c);!l&&!("win"in c)&&(c.win=e(this));this.each(function(){var k=e(this).data("__nicescroll")||!1;k||(c.doc=l?e(this):c.doc,k=new K(c,e(this)),e(this).data("__nicescroll",k));h.push(k)});return 1==h.length?h[0]:h};window.NiceScroll={getjQuery:function(){return e}};e.nicescroll||(e.nicescroll=new z,e.nicescroll.options=C)})(jQuery);

;(function($){window.NTLS=window.NTLS||{};window.NTLS.Behaviors=window.NTLS.Behaviors||{};window.NTLS.Behaviors.PositionFooter=function(){var $mainFooter=$('footer.main-footer');var $mainWrapper=$('.main-wrap');var mainFooterHeight=$mainFooter.outerHeight();$mainWrapper.css('padding-bottom',mainFooterHeight);$mainFooter.css('margin-top',-mainFooterHeight);};window.NTLS.Behaviors.AllSubscribe=function(context){function _show(e){e.preventDefault();$('.allsubsshow').toggleClass('subhidden');$('li.newsletter-signup').toggleClass('active');if($('li.search-bar-trigger').hasClass('active')){$("form.search-bar").animate({height:0},400,function(){$("form.search-bar").removeClass('expanded');$("form.search-bar").css('display','none');$("form.search-bar").css('height','145px');$('header#main-header').removeClass('search-expanded active');$('li.search-bar-trigger').removeClass('active');});}}
function _focus(e){e.preventDefault();$('.allsubsshow').toggleClass('subhidden');$('li.newsletter-signup').toggleClass('active');}
$('.newsletter-signup-trigger').on('click.AllSubscribe',_show);$('#close_mail').on('click.AllSubscribe',_show);};window.NTLS.Behaviors.ArticleThumbs=function(context){$('.article-thumb:not(img)',context).append('<div class="hover-state"></div>');};window.NTLS.IssueBrowser=function($trigger){var $header=$trigger.parents('header.main-header');var $issueBrowser=$('.issue-browser',$header).show();var $issueBrowserInner=$('.issue-browser-inner',$issueBrowser);var $carousel=$('.issue-browser-carousel',$issueBrowser);var $firstItem=$carousel.children().first();var $wrap=$carousel.parent();var $prev=$('.issue-browser-prev',$issueBrowser).addClass('disabled');var $next=$('.issue-browser-next',$issueBrowser);var itemWidth=$firstItem.outerWidth(true);var itemMargin=NTLS.pxToInt($firstItem.css('marginLeft'))+NTLS.pxToInt($firstItem.css('marginRight'));var numItems=$carousel.children().length;var slideWidth=40+($wrap.width());var itemsPerSlide=(slideWidth+itemMargin)/itemWidth;var numSlides=Math.ceil(numItems/itemsPerSlide);var slideIndex=0;var carouselSpeed=700;function _swipeStatus(event,phase,direction,distance){if($carousel.is(':animated')){return;}
margins=(slideIndex+1)*itemMargin;if(phase=='move'&&(direction=='left'||direction=='right')){var duration=0;if(direction=='left'){_scrollCarousel((slideWidth*slideIndex)+distance+margins,duration);}
else if(direction=='right'){_scrollCarousel((slideWidth*slideIndex)-distance+margins,duration);}}
else if(phase=='cancel'){_scrollCarousel(slideWidth*slideIndex+margins,Math.round(carouselSpeed/3));}
else if(phase=='end'){if(direction=='right'){_prevNext(Math.max(slideIndex-1,0));}
else if(direction=='left'){_prevNext(Math.min(slideIndex+1,numSlides-1));}}}
function _prev(e){e.preventDefault();_prevNext(Math.max(slideIndex-1,0));}
function _next(e){e.preventDefault();_prevNext(Math.min(slideIndex+1,numSlides-1));}
function _prevNext(index){if($carousel.is(':animated')){return;}
slideIndex=index;margins=(slideIndex+1)*itemMargin;_scrollCarousel((slideWidth*slideIndex)+margins,carouselSpeed);_lazyLoad();}
function _scrollCarousel(distance,duration){if(!duration){$carousel.css('marginLeft',-distance);return;}
$carousel.animate({marginLeft:-distance},duration,function(){$prev=$('.issue-browser-prev',$issueBrowser);$next=$('.issue-browser-next',$issueBrowser);disablePrev=slideIndex===0;$prev.toggleClass('disabled',disablePrev);disableNext=numSlides==slideIndex+1;$next.toggleClass('disabled',disableNext);});slideIndex=slideIndex;}
function _lazyLoad(){var $item=$('> li:eq('+itemsPerSlide*slideIndex+')',$carousel);for(var i=0;i<itemsPerSlide;i++){$('img',$item).attr('src',$('img',$item).attr('data-src'));$item=$item.next();if(!$item.length){break;}}}
$prev.on('click.IssueBrowser',_prev);$next.on('click.IssueBrowser',_next);if(Modernizr.touch&&numItems>4){$carousel.swipe({swipeStatus:_swipeStatus,threshold:75,allowPageScroll:'vertical',excludedElements:[]});}
$issueBrowser.height($issueBrowserInner.outerHeight(true));$issueBrowser.hide();new window.NTLS.HeaderDropDown({$trigger:$trigger,$content:$issueBrowser,onShow:function($issueBrowser){_lazyLoad($issueBrowser);}});};window.NTLS.IssueBrowserPage=function(){var $issueBrowser=$('.issue-browser.page');var $issueBrowserInner=$('.issue-browser-inner',$issueBrowser);var $carousel=$('.issue-browser-carousel',$issueBrowser);var $firstItem=$carousel.children().first();var $wrap=$carousel.parent();var $prev=$('.issue-browser-prev',$issueBrowser).addClass('disabled');var $next=$('.issue-browser-next',$issueBrowser);var itemWidth=$firstItem.outerWidth(true);var itemMargin=parseInt($firstItem.css('marginLeft'))+parseInt($firstItem.css('marginRight'));var numItems=$carousel.children().length;var slideWidth=$wrap.width();slideWidth=840;var itemsPerSlide=(slideWidth+itemMargin)/itemWidth;var numSlides=Math.ceil(numItems/itemsPerSlide);var slideIndex=0;var carouselSpeed=700;function _swipeStatus(event,phase,direction,distance){if($carousel.is(':animated')){return;}
margins=(slideIndex+1)*itemMargin;if(phase=='move'&&(direction=='left'||direction=='right')){var duration=0;if(direction=='left'){_scrollCarousel((slideWidth*slideIndex)+distance+margins,duration);}
else if(direction=='right'){_scrollCarousel((slideWidth*slideIndex)-distance+margins,duration);}}
else if(phase=='cancel'){_scrollCarousel(slideWidth*slideIndex+margins,Math.round(carouselSpeed/3));}
else if(phase=='end'){if(direction=='right'){_prevNext(Math.max(slideIndex-1,0));}
else if(direction=='left'){_prevNext(Math.min(slideIndex+1,numSlides-1));}}}
function _prev(e){e.preventDefault();_prevNext(Math.max(slideIndex-1,0));}
function _next(e){e.preventDefault();_prevNext(Math.min(slideIndex+1,numSlides-1));}
function _prevNext(index){if($carousel.is(':animated')){return;}
slideIndex=index;margins=(slideIndex+1)*itemMargin;_scrollCarousel((slideWidth*slideIndex)+margins,carouselSpeed);_lazyLoad();}
function _scrollCarousel(distance,duration){if(!duration){$carousel.css('marginLeft',-distance);return;}
$carousel.animate({marginLeft:-distance},duration,function(){$prev=$('.issue-browser-prev',$issueBrowser);$next=$('.issue-browser-next',$issueBrowser);disablePrev=slideIndex===0;$prev.toggleClass('disabled',disablePrev);disableNext=numSlides==slideIndex+1;$next.toggleClass('disabled',disableNext);});slideIndex=slideIndex;}
function _lazyLoad(){var $item=$('> li:eq('+itemsPerSlide*slideIndex+')',$carousel);for(var i=0;i<itemsPerSlide;i++){$('img',$item).attr('src',$('img',$item).attr('data-src'));$item=$item.next();if(!$item.length){break;}}}
$prev.on('click.IssueBrowser',_prev);$next.on('click.IssueBrowser',_next);if(Modernizr.touch&&numItems>4){$carousel.swipe({swipeStatus:_swipeStatus,threshold:75,allowPageScroll:'vertical',excludedElements:[]});}
$issueBrowser.height($issueBrowserInner.outerHeight(true));};window.NTLS.IssueBrowserPage();window.NTLS.HeaderDropDown=function(options){var $trigger=options.$trigger;var $content=options.$content;var $header=$trigger.parents('header.main-header');var clickEvent=Modernizr.touch?'touchstart':'click';var dropDownSpeed=350;var toggleOptions={duration:dropDownSpeed,easing:'easeInQuad',complete:function(){$header.add($trigger).toggleClass('active');$(this).toggleClass('expanded');if(!$content.is('.search-bar.expanded')){$header.removeClass('search-expanded');}
if(typeof options.onComplete!=='undefined'){options.onComplete.call(this,$content);}}};function _toggle(e){e.preventDefault();$('.allsubsshow').addClass('subhidden');$('li.newsletter-signup').removeClass('active');if(typeof options.onShow!=='undefined'&&!$trigger.is('.active')&&!$content.is(':animated')){options.onShow.call(this,$content);}
if($trigger.siblings('.active').length){$trigger.addClass('active').siblings('.active').removeClass('active');$('.expanded',$header).removeClass('expanded').hide();$content.addClass('expanded').show();if(!$content.is('.search-bar.expanded')){$header.removeClass('search-expanded');}
if(typeof options.onComplete!=='undefined'){options.onComplete.call(this,$content);}}else{$content.slideToggle(toggleOptions);}}
function _scroll(){if(!Modernizr.touch||!$content.filter('.expanded.search-bar').length){$content.filter('.expanded:not(:animated)').slideToggle(toggleOptions);}}
function _bodyClick(e){var $target=$(e.target);if(!$target.parents('.main-header').length&&!$target.is('.main-header')){$content.filter('.expanded').slideToggle(toggleOptions);}}
$trigger.on('click.HeaderDropDown',_toggle);$('body').on(clickEvent+'.HeaderDropDown',_bodyClick);$(window).on('scroll.HeaderDropDown',_scroll);};window.NTLS.Behaviors.IssueBrowser=function(){$('.issue-browser-trigger').each(function(){new window.NTLS.IssueBrowser($(this));});};window.NTLS.HeaderSearch=function($trigger){var $header=$trigger.closest('.main-header');var $searchBar=$('.search-bar',$header);new window.NTLS.HeaderDropDown({$trigger:$trigger,$content:$searchBar,onShow:function($content){$(this).closest('.main-header').addClass('search-expanded');},onComplete:function($content){if($content.is('.expanded')){$('input.search-field',$content).trigger('focus');}
else{$('input:focus',$content).trigger('blur');}}});};window.NTLS.Behaviors.SlickCaro=function(){var clickEvent=Modernizr.touch?'touchstart':'click';var speed=700;var ckpos=0;var curid=null;PrevNext();$('body').on(clickEvent,'.slick-prev',function(){if($(this).hasClass('slick-disabled')){return;}
ckpos=ckpos-1;$('.slick-track').transition({right:'-=978',easing:'in-out',duration:speed,complete:function(){PrevNext();}});});$('body').on(clickEvent,'.slick-next',function(){if(ckpos>=0){$('.slick-next').addClass('slick-disabled');return;}
if($(this).hasClass('slick-disabled')){return;}
ckpos=ckpos+1;$('.slick-track').transition({right:'+=978',easing:'in-out',duration:speed,complete:function(){PrevNext();}});});function PrevNext(){prependBlogs();$track=$('.slick-track');allwidth=$track.width();curright=-1*(parseInt($track.css('right')));$('.slick-next').addClass('slick-disabled');$('.slick-prev').addClass('slick-disabled');if((allwidth-curright)>979){$('.slick-prev').removeClass('slick-disabled');}
if(curright>0){$('.slick-next').removeClass('slick-disabled');}}
function prependBlogs(){$this=$('.slick-slide:first-child');conid=$this.data('conid');if(curid==conid){return;}
curid=conid;$.get("/blog/caro/"+conid).done(function(data){$('.slick-track').prepend(data);sldswd=978*($(".slick-slide").length);$('.slick-track').width(sldswd);});}}
window.NTLS.Behaviors.HeaderSearch=function(){var $searchForms=$('form.search-bar');if($('body').is('.page-search-results-box')){$('.search-bar-trigger').on('click.HeaderSearch',function(e){e.preventDefault();$('html, body').animate({scrollTop:0},500,function(){$('.page-header input.search-field').first().trigger('focus');});});}
else{$('.search-bar-trigger').each(function(){new window.NTLS.HeaderSearch($(this));});}
function _checkSearchVal($forms){$forms.each(function(){if($.trim($('input.search-field',$(this)).val())===''){$(this).addClass('disabled');}
else{$(this).removeClass('disabled');}});}
_checkSearchVal($searchForms);$('input.search-field').on('keyup.HeaderSearch',function(e){_checkSearchVal($(this).parents('form'));});$('.search-submit').click(function(e){if($(this).parents('form').is('.disabled')){e.preventDefault();return false;}});};window.NTLS.Behaviors.GetHeaderHeight=function(){window.NTLS.headerHeight=$('#main-header').outerHeight();};window.NTLS.Behaviors.IOSStickyHeaderFocus=function(){if(!Modernizr.touch){return;}
var $header=$('#main-header');var scrollTop=0;var fixedScroll=false;function _scroll(e){if(fixedScroll){return;}
if($('input:focus',$header).length){$(window).scrollTop(scrollTop);fixedScroll=true;return;}
scrollTop=$(window).scrollTop();}
function _blur(e){fixedScroll=false;}
$(window).on('scroll.IOSStickyHeaderFocus',_scroll);$('input',$header).on('blur.IOSStickyHeaderFocus',_blur);};window.NTLS.Behaviors.SocialLinks=function(context){var width=670;var height=370;function _share(e){e.preventDefault();var wLeft=window.screenLeft?window.screenLeft:window.screenX;var wTop=window.screenTop?window.screenTop:window.screenY;var top=(wTop+$(window).height()/2)-(height/2);var left=(wLeft+$(window).width()/2)-(width/2);var windowParams='width='+width+', height='+height+', top='+top+', left='+left;var wName=$(e.target).is('.fb-share')?'Facebook':'Twitter';window.open($(e.target).attr('href'),wName,windowParams);}
$('.fb-share, .tw-share').on('click.SocialLinks',_share);};window.NTLS.Behaviors.StatsShow=function(context){function _act(e){e.preventDefault();$(".most").toggleClass("on");$(".stats_stage").toggleClass("mr");}
$('#most_rs').on('click.StatsShow',_act);};window.NTLS.Behaviors.IssueLanding=function(){if(Modernizr.touch){$('.page-issue-landing .main-content .issue-chapter.coming-soon').on('click.IssueLanding',function(){$(this).toggleClass('active');if($(this).is('.active')){$(this).siblings().removeClass('active');}});}};window.NTLS.Behaviors.FixPlaceholders=function(){if(!Modernizr.input.placeholder){var placeholder;$('input[type=email], input[type=text]').each(function(){placeholder=$(this).attr('placeholder');if(typeof placeholder!=='undefined'&&placeholder!==false&&placeholder!==''){if($(this).val()===''){$(this).val($(this).attr('placeholder')).addClass('placeholder');}
$(this).on('focus.FixPlaceholders',function(){if($(this).val()==$(this).attr('placeholder')){$(this).val('').removeClass('placeholder');}}).on('blur.FixPlaceholders',function(){if($(this).val()===''){$(this).val($(this).attr('placeholder')).addClass('placeholder');}});}});}};window.NTLS.pxToInt=function(pxVal){return typeof pxVal==='undefined'?0:parseFloat(pxVal.replace('px',''));};window.NTLS.equalHeights=function($els){var heights=[];$els.each(function(){heights.push($(this).height());});$els.height(Math.max.apply(Math,heights));};window.NTLS.setCookie=function(name,value,days,path){var expires='';path=typeof path==='undefined'?'/':path;if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));expires=';expires='+date.toGMTString();}
document.cookie=name+'='+value+expires+';path='+path;};window.NTLS.getCookie=function(name){if(document.cookie.length>0){c_start=document.cookie.indexOf(name+'=');if(c_start!=-1){c_start=c_start+name.length+1;c_end=document.cookie.indexOf(';',c_start);if(c_end==-1){c_end=document.cookie.length;}
return unescape(document.cookie.substring(c_start,c_end));}}
return'';};window.NTLS.destroyCookie=function(name){this.setCookie(name,'',-1);};($)(function(){window.NTLS.Behaviors.StickyHeader=function(){var $stickyHeader=$('#main-header');function _scroll(){if($stickyHeader.css('position')=='fixed'){$stickyHeader.css('left',-$(window).scrollLeft());}else{$stickyHeader.css('left',0);}}
$(window).on('scroll.StickyHeader',_scroll);};$.each(window.NTLS.Behaviors,function(index,behavior){behavior.call(document);});});})(jQuery);$("#loginform #submit").click(function(){var addy="test";$.get('/main/members',{'email_address':addy},function(response){if(response.success){location.reload();}
else{alert(response.success);}},'json');return false;});;(function($){window.NTLS=window.NTLS||{};window.NTLS.Behaviors=window.NTLS.Behaviors||{};window.NTLS.Behaviors.SearchResults=function(){var $searchForm=$('.search-bar');var $filters=$('.search-results-filters');var filterHeight=$('.filter-label').height();function _submit(e){e.preventDefault();var search_term=$.trim($(this).find('.search-field').val()).replace(/[^a-zA-Z0-9_\w\s-]/g,'');window.location='/search/'+encodeURIComponent(search_term);if(Modernizr.touch){$('.search-field',this).blur();}}
function _equalHeights(){$filters.css('paddingTop',$('.search-results-summary').height()-filterHeight);}
_equalHeights();$searchForm.on('submit.SearchResults',_submit);};})(jQuery);;(function($){window.NTLS=window.NTLS||{};window.NTLS.Behaviors=window.NTLS.Behaviors||{};window.NTLS.Behaviors.ArticlePage=function(){var $figCaptions=$('.page-content figure');$figCaptions.each(function(){NTLS.equalHeights($('.caption, .credit',this));});};window.NTLS.Behaviors.ArticleIssueMap=function(){var $issueMap=$('#issue-map');if(!$issueMap.length){return;}
var $article=$('.main-article');var $articleWrap=$('> .wrap',$article);var $issueMapArticles=$('.issue-map-articles',$issueMap);var $scrollWrapper=$('#scroll-wrapper',$issueMap);var $moduleHeader=$('.module-header',$issueMap);var $collapseWrapper=$('#collapse-wrapper',$issueMap);var $issueMapChapters=$('.issue-map-chapter',$issueMap);var $expandedChapter;var $collapsedHeader;var $collapsedHeaderInner;var collapsedHeaderInnerHeight=0;var expandedChapterTop=0;var issueMapTop=$issueMap.offset().top;var issueMapInitialHeight=$issueMap.outerHeight();var $rail=$issueMap.parents('.rail');var issueMapWidth=$issueMap.outerWidth();var issueMapLeft=$issueMap.offset().left;var issueMapRight=issueMapLeft+issueMapWidth;var articleHeight=$articleWrap.outerHeight();var moduleHeaderHeight=$moduleHeader.outerHeight();var headerPadding=NTLS.pxToInt($moduleHeader.css('paddingBottom'));var headerAnimationDistance=headerPadding;var collapseAnimationDuration=150;var positionDuration=0;var headerAnimationDuration=0;var headerPaddingAnimationDuration=0;var headerHeightAnimationDuration=0;var windowHeight=$(window).height();var hasCollapsed=false;var lockMaxHeight=false;var fixOffset=24;var chaptersHeight=0;var maxHeight=0;var scrollTop;var viewport;var viewportTop;var articleTop;var articleBottom;var issueMapHeight;var scrollTo;var $issueMapArticle;var $clickedChapterTab;var niceScroll;var _enableScrollTimeout;var _showScrollTimeout;var scrollOptions={cursorcolor:'#ccc',cursorwidth:6,cursorborder:'none'};function _measure(){scrollTop=$(window).scrollTop();viewportTop=scrollTop+window.NTLS.headerHeight;articleTop=$articleWrap.offset().top;articleBottom=articleTop+$articleWrap.outerHeight();}
function _setMaxHeight(){if($collapseWrapper.is('.collapsed')||lockMaxHeight){return;}
scrollTop=$(window).scrollTop();windowHeight=$(window).height();viewport=windowHeight-window.NTLS.headerHeight;issueMapHeight=$issueMap.outerHeight();articleHeight=$articleWrap.outerHeight();if(windowHeight+scrollTop>articleHeight+articleTop){viewport=articleHeight;}
if($issueMap.is('.fixed')){if(scrollTop+windowHeight>articleBottom){maxHeight=articleBottom-scrollTop-window.NTLS.headerHeight-moduleHeaderHeight+fixOffset+1;}
else{maxHeight=viewport-moduleHeaderHeight+fixOffset;}}
else{maxHeight=viewport-moduleHeaderHeight;if($issueMap.is('.bottom')){maxHeight='none';}}
if(maxHeight=='none'||maxHeight>=$scrollWrapper.children().first().outerHeight()){_disableScroll();}
else{_enableScroll();}
$scrollWrapper.css('maxHeight',maxHeight);issueMapHeight=viewport;niceScroll.resize();_measure();}
function _click(e){if($(e.target).parents('.issue-map-articles ul').length){return;}
e.preventDefault();if($collapseWrapper.is('.collapsed')){_issueMapExpand();return;}
$issueMapArticle=$(this).children('.issue-map-articles');if($issueMapArticles.filter('.clicked').length){return;}
$issueMapArticle.addClass('clicked');$clickedChapterTab=$(this);$issueMapArticles.filter(':visible:not(.clicked)').slideUp(400,function(){$('.icon-up',$issueMap).removeClass('icon-up').addClass('icon-down');}).siblings('i').first().animate({top:0},400);niceScroll.doScrollTo(0);if($issueMapArticle.is(':visible')){$issueMapArticle.slideUp({duration:400,progress:function(){_setMaxHeight();issueMapHeight=$issueMap.outerHeight();if(!$issueMap.is('.fixed')&&viewportTop>=issueMapTop+fixOffset&&(viewportTop+issueMapHeight)<articleBottom){$issueMap.removeClass('bottom top').addClass('fixed');}},complete:function(){$(this).removeClass('clicked').parent().siblings().andSelf().removeClass('expanded');$expandedChapter=[];expandedChapterTop=0;issueMapHeight=$issueMap.outerHeight();$('.icon-up',$clickedChapterTab).removeClass('icon-up').addClass('icon-down');}}).siblings('i').first().animate({top:0},400);}
else{var t=0;t+=$issueMapArticle.siblings('.chapter-number').outerHeight(true);$issueMapArticle.show();t+=$('.chapter-title',$issueMapArticle).first().outerHeight(true);$issueMapArticle.hide();t-=$issueMapArticle.siblings('i').first().height();t=t/2;$issueMapArticle.slideDown({duration:400,progress:function(animation,progress,remaining){if($('body').is(':animated')){return;}
_setMaxHeight();issueMapHeight=$issueMap.outerHeight();if((viewportTop+issueMapHeight)>=articleBottom){var newHeight=issueMapInitialHeight+$(this).data('height');if(newHeight>viewport){newHeight=viewport;}
scrollTo=articleBottom-window.NTLS.headerHeight-newHeight;if(articleBottom-viewportTop>=newHeight){$issueMap.removeClass('bottom top').addClass('fixed');}
if(scrollTo<$(window).scrollTop()){$('html, body').animate({scrollTop:scrollTo},remaining);}}},complete:function(){$(this).removeClass('clicked');_expandChapter($(this));issueMapHeight=$issueMap.outerHeight();}}).siblings('i').first().animate({top:t},400);}}
function _scroll(){var fixBottom=false;_measure();if(viewportTop>=issueMapTop+fixOffset){if(!hasCollapsed){hasCollapsed=true;lockMaxHeight=true;_issueMapCollapse();}
issueMapHeight=$issueMap.outerHeight();if($collapseWrapper.is('.collapsed')||$collapseWrapper.is(':animated')){fixBottom=(viewportTop+issueMapHeight-fixOffset-1)>=articleBottom;}else{fixBottom=(viewportTop+moduleHeaderHeight-fixOffset+$scrollWrapper.children().first().outerHeight())>=articleBottom;}
if(!$issueMap.is('.bottom')&&fixBottom){$issueMap.removeClass('fixed top').addClass('bottom');}
else if(!$issueMap.is('.fixed')&&!fixBottom){$issueMap.removeClass('bottom top').addClass('fixed');}}
else if(!$issueMap.is('.top')){if(Modernizr.touch){niceScroll.doScrollTo(0);}
hasCollapsed=false;$issueMap.removeClass('bottom fixed').addClass('top');_issueMapExpand();}
_measure();_setMaxHeight();}
function _issueMapCollapse(){_stopExpandCollapse();if(!$expandedChapter.length){_expandChapter($issueMapArticles.filter(':has(li.active)'));}
var h=0;_disableScroll();chaptersHeight=$issueMapChapters.first().parent().outerHeight();positionDuration=expandedChapterTop*collapseAnimationDuration/chaptersHeight;headerAnimationDuration=collapseAnimationDuration-positionDuration;headerPaddingAnimationDuration=(headerPadding*headerAnimationDuration)/headerAnimationDistance;headerHeightAnimationDuration=(collapsedHeaderInnerHeight*headerAnimationDuration)/headerAnimationDistance;h+=NTLS.pxToInt($expandedChapter.css('paddingTop'));h+=_collapsedItemHeight($expandedChapter);h+=NTLS.pxToInt($('.issue-map-articles > ul',$expandedChapter).css('marginTop'));$collapseWrapper.animate({height:h},{duration:collapseAnimationDuration,easing:'linear',progress:function(){_scroll();},complete:function(){lockMaxHeight=false;$(this).addClass('collapsed');}});$scrollWrapper.animate({marginTop:-(expandedChapterTop-moduleHeaderHeight)},positionDuration,'linear',function(){$moduleHeader.animate({height:$collapsedHeader.outerHeight()+20},headerPaddingAnimationDuration,'linear',function(){$collapsedHeader.show();$collapsedHeaderInner.animate({marginTop:0},headerHeightAnimationDuration,'linear');});});}
function _issueMapExpand(){_stopExpandCollapse();if(scrollTop+window.NTLS.headerHeight+$scrollWrapper.height()+moduleHeaderHeight-fixOffset-1>articleBottom){scrollTo=articleBottom-window.NTLS.headerHeight-$scrollWrapper.height()-moduleHeaderHeight+fixOffset+1;$('html, body').animate({scrollTop:scrollTo},collapseAnimationDuration);}
$collapseWrapper.removeClass('collapsed').animate({height:$scrollWrapper.outerHeight()},{duration:collapseAnimationDuration,easing:'linear',progress:function(animation,progress,remaining){_scroll();if($('body').is(':animated')){return;}},complete:function(){$(this).css('height','auto');_enableScroll();niceScroll.resize();_setMaxHeight();}});$collapsedHeaderInner.animate({marginTop:collapsedHeaderInnerHeight},headerHeightAnimationDuration,'linear',function(){$collapsedHeader.hide();$moduleHeader.animate({height:moduleHeaderHeight},headerPaddingAnimationDuration,'linear',function(){$scrollWrapper.animate({marginTop:0},positionDuration,'linear');});});}
function _stopExpandCollapse(){$collapseWrapper.stop();$scrollWrapper.stop();$moduleHeader.stop();$collapsedHeaderInner.stop();}
function _disableScroll(){$('body').addClass('disable-scroll');niceScroll.doScrollTo(0);clearTimeout(_enableScrollTimeout);niceScroll.rail.drag=true;}
function _enableScroll(){niceScroll.resize();clearTimeout(_enableScrollTimeout);_enableScrollTimeout=setTimeout(function(){$('body').removeClass('disable-scroll');},100);niceScroll.rail.drag=false;}
function _mouseEnter(){clearTimeout(_showScrollTimeout);_showScrollTimeout=setTimeout(function(){niceScroll.show();},400);if($(this).is('.fixed')){_issueMapExpand();}}
function _mouseLeave(e){var $over=$(document.elementFromPoint(e.clientX,e.clientY));if(typeof $over==='undefined'||(!$over.is('.nicescroll-rails')&&!$over.parents('.nicescroll-rails').length)){clearTimeout(_showScrollTimeout);niceScroll.hide();}}
function _headerClick(e){if($(e.target).is('a')){return;}
clearTimeout(_showScrollTimeout);if($(this).is('.module-header')){expandedChapterTop=$expandedChapter.length?$expandedChapter.position().top:0;_issueMapCollapse();niceScroll.hide();}else{_showScrollTimeout=setTimeout(function(){niceScroll.show();},400);_issueMapExpand();}}
function _mouseMove(e){if(e.pageX>issueMapLeft&&e.pageX<issueMapRight){if(!$rail.is('.hover')){$rail.addClass('hover');}}
else if($rail.is('.hover')){$rail.removeClass('hover');if(!$issueMap.is('.top')){_issueMapCollapse();}}}
function _mouseLeaveArticleWrap(e){var $over=$(document.elementFromPoint(e.clientX,e.clientY));if(!$issueMap.is('.top')&&(!$over.length||(!$over.is('.nicescroll-rails')&&!$over.parents('.nicescroll-rails').length))){_issueMapCollapse();}}
function _expandChapter($article){$expandedChapter=$article.show().parent().addClass('expanded');$expandedChapter.siblings().removeClass('expanded');expandedChapterTop=$expandedChapter.length?$expandedChapter.position().top:0;$expandedChapter.find('.icon-down').removeClass('icon-down').addClass('icon-up');}
function _iconTop(){var pos=0;pos+=_collapsedItemHeight($expandedChapter);pos-=$('.icon-up, .icon-down',$expandedChapter).first().height();pos=pos/2;return pos;}
function _collapsedItemHeight($item){return $('.chapter-number',$item).outerHeight(true)+$('.chapter-title',$item).outerHeight(true);}
function _resize(){_measure();_setMaxHeight();}
$issueMap.addClass('top');$moduleHeader.clone().removeAttr('class').addClass('collapsed-header').wrapInner('<div class="collapsed-header-inner"></div>').insertAfter($moduleHeader);$collapsedHeader=$moduleHeader.next();$('.module-action',$collapsedHeader).remove();$collapsedHeaderInner=$('.collapsed-header-inner',$collapsedHeader);collapsedHeaderInnerHeight=$collapsedHeaderInner.outerHeight();headerAnimationDistance+=collapsedHeaderInnerHeight;$collapsedHeaderInner.css({marginTop:collapsedHeaderInnerHeight});$collapsedHeader.height(collapsedHeaderInnerHeight).hide();$issueMapArticles.each(function(){$(this).show().data('height',$(this).outerHeight()).hide();});_expandChapter($issueMapArticles.filter(':has(li.active)'));var iconTop=_iconTop($expandedChapter);$('i',$expandedChapter).first().css('top',iconTop);var intervalIncrement=0;var checkIconTop=setInterval(function(){var iconTop2=_iconTop();intervalIncrement++;if(iconTop2!=iconTop){$('i',$expandedChapter).first().css('top',iconTop2);}
if(intervalIncrement>60||iconTop2!=iconTop){clearInterval(checkIconTop);}},50);if(Modernizr.touch){setTimeout(function(){expandedChapterTop=$expandedChapter.position().top;},200);}
$(window).on('scroll.ArticleIssueMap',_scroll).on('resize.ArticleIssueMap',_resize).on('ntlsResetHeaderHeight.ArticleIssueMap',_scroll);$issueMapChapters.on('click.ArticleIssueMap',_click);$issueMap.on('mouseenter.ArticleIssueMap',_mouseEnter).on('mouseleave.ArticleIssueMap',_mouseLeave);if(!Modernizr.touch){scrollOptions.autohidemode=false;}
niceScroll=$scrollWrapper.niceScroll(scrollOptions).hide();$('.module-header, .collapsed-header').on('click.ArticleIssueMap',_headerClick);$articleWrap.on('mousemove.ArticleIssueMap',_mouseMove).on('mouseleave.ArticleIssueMap',_mouseLeaveArticleWrap);$(window).on('load.ArticleIssueMap',function(){var wasHidden=$collapsedHeader.is(':hidden');$collapsedHeader.show();headerAnimationDistance-=collapsedHeaderInnerHeight;collapsedHeaderInnerHeight=$collapsedHeaderInner.outerHeight();headerAnimationDistance+=collapsedHeaderInnerHeight;$collapsedHeader.height(collapsedHeaderInnerHeight);$collapsedHeaderInner.css({marginTop:collapsedHeaderInnerHeight});if(wasHidden){$collapsedHeader.hide();}});$('html, body').on('scroll mousedown wheel DOMMouseScroll mousewheel keyup',function(e){if(e.which>0||e.type==='mousedown'||e.type==='mousewheel'){$('html, body').stop();}});};window.NTLS.Behaviors.ArticleProgress=function(){if(typeof JSON==='undefined'){return;}
var $article=$('.main-article');var $resumeBanner=$('.article-resume',$article);if(!$resumeBanner.length){return;}
var $articleWrap=$('> .wrap',$article);var $articleProgress=$('#issue-map li.active .article-progress');var articleID=$article.attr('id').replace('main-article-','');var scrollTop=0;var progressPercent=0;var articleTop=$articleWrap.offset().top;var articleHeight=$articleWrap.outerHeight();var articleBottom=articleTop+articleHeight;var viewportTop=NTLS.headerHeight;var viewportBottom=$(window).height();var progressCookie=NTLS.getCookie('article_progress');var progressData={scrollPos:0,height:articleHeight};var cookieData=progressCookie?JSON.parse(NTLS.getCookie('article_progress')):{};progressData=typeof cookieData[articleID]!=='undefined'?cookieData[articleID]:progressData;var scrollPos=progressData.scrollPos;if(scrollPos){$resumeBanner.show();}else{$resumeBanner.remove();}
function _updateProgressBar(){progressPercent=Math.min((scrollPos*100)/articleHeight,100);$articleProgress.css('width',progressPercent+'%');if(progressPercent>=100){$resumeBanner.remove();}}
function _scroll(){scrollTop=$(window).scrollTop();viewportTop=scrollTop+NTLS.headerHeight;viewportBottom=scrollTop+$(window).height();if(viewportBottom>articleBottom){scrollPos=articleHeight;progressPercent=100;}
else{if(viewportTop>articleTop){$resumeBanner.remove();}
if((viewportTop-articleTop)<=scrollPos||viewportTop<=articleTop){return;}
scrollPos=viewportTop-articleTop;}
progressCookie=NTLS.getCookie('article_progress');cookieData=progressCookie?JSON.parse(NTLS.getCookie('article_progress')):cookieData;cookieData[articleID]={scrollPos:scrollPos,height:articleHeight};NTLS.setCookie('article_progress',JSON.stringify(cookieData));if(progressPercent>=100&&$resumeBanner.length&&$resumeBanner.is(':visible')){var resumeBannerHeight=$resumeBanner.outerHeight();$resumeBanner.remove();$(window).scrollTop(scrollTop+resumeBannerHeight);}
_updateProgressBar();}
function _closeResumeBanner(){$resumeBanner.fadeOut(500,function(){$(this).remove();});}
function _resumeBannerClick(e){e.preventDefault();if($(e.target).closest('.close-article-resume').length){_closeResumeBanner();return;}
$('html, body').animate({scrollTop:scrollPos-NTLS.headerHeight+articleTop});}
_updateProgressBar();$(window).on('scroll.ArticleProgress',_scroll).on('resize.ArticleProgress',_scroll);$('.article-resume',$article).on('click.ArticleProgress',_resumeBannerClick);};window.NTLS.Behaviors.RailContent=function(){var $footnotes=$('#footnotes .footnote');var $featuredComments=$('#featured-comments .featured-comment');var $relatedContent=$('#related-content .related-content-item');var $issueMap=$('#issue-map');var $article=$('.main-article');var $articleWrap=$('> .wrap',$article);var $footnoteRefs=$('.page-content .footnote-ref',$articleWrap);var $featuredCommentsRefs=$('.page-content .png-comment',$articleWrap);var $relatedContentRefs=$('.page-content .png-related',$articleWrap);var $expandedChapter=$('li.issue-map-chapter.expanded',$issueMap).first();var $last=$footnotes.last();var articleHeight=$articleWrap.outerHeight();var wrapTop=$articleWrap.offset().top;var collapsedIssueMapHeight=0;var top=0;var lastTop=0;var height=0;var offset=50;function _getCollapsedIssueMapHeight(){$expandedChapter=$('li.issue-map-chapter.expanded',$issueMap).first();collapsedIssueMapHeight=0;if($expandedChapter.length){collapsedIssueMapHeight+=NTLS.pxToInt($expandedChapter.css('paddingTop'));collapsedIssueMapHeight+=$('.chapter-number',$expandedChapter).outerHeight(true);collapsedIssueMapHeight+=$('.chapter-title',$expandedChapter).outerHeight(true);collapsedIssueMapHeight+=NTLS.pxToInt($('.issue-map-articles > ul',$expandedChapter).css('marginTop'));collapsedIssueMapHeight+=$('.collapsed-header',$issueMap).outerHeight();collapsedIssueMapHeight+=offset;}}
function _setTop($item){$item.css('top',top);if(top>lastTop){lastTop=top;$last=$item;}}
function _positionItem(index){var $ref=[];if($(this).is('.footnote')){$ref=$footnoteRefs.eq(index);}
else if($(this).is('.featured-comment')){$ref=$featuredCommentsRefs.eq(index);}
else{$ref=$relatedContentRefs.eq(index);}
top=0;top=Math.max(top,collapsedIssueMapHeight);if(top<collapsedIssueMapHeight){top=collapsedIssueMapHeight;}
if($ref.length){top=Math.max(top,$ref.offset().top-wrapTop);}
if($(this).prev().length){top=Math.max(top,$(this).prev().position().top+$(this).prev().outerHeight(true));}
_setTop($(this));}
function _positionItems($items,$prevItems){$items.each(function(){top=$(this).position().top;height=$(this).outerHeight(true);top=Math.max(top,collapsedIssueMapHeight);$prevItems.each(function(){var t=$(this).position().top;if(t<=top+height){top=Math.max(top,t+$(this).outerHeight(true));}});_setTop($(this));});}
function _refClick(e){e.preventDefault();return;var $anchor=$($(this).attr('href'));_getCollapsedIssueMapHeight();$anchor.css('top',-(collapsedIssueMapHeight+window.NTLS.headerHeight-offset)+'px');$(window).trigger('scroll');}
function _positionRailContent(){$footnotes.each(_positionItem);$featuredComments.each(_positionItem);$relatedContent.each(_positionItem);_positionItems($featuredComments,$footnotes);_positionItems($relatedContent,$footnotes.add($featuredComments));if($last.length){$articleWrap.css('minHeight',lastTop+$last.outerHeight(true));}};_getCollapsedIssueMapHeight();_positionRailContent();$('body').on('click.RailContent','.footnote-ref',_refClick);$(window).on('load.RailContent',_positionRailContent);};NTLS.disqusLoaded=false;var disqusReady=function(){NTLS.disqusLoaded=true;if(window.location.hash.indexOf('#comment')!==0){setTimeout(function(){$('#disqus-wrapper').css('position','static');if($('#comments-container .button').is(':visible')){}},550);}};window.NTLS.Behaviors.ArticleComments=function(){var $jumpToComments=$('.jump-to-comments');var $commentsContainer=$('#comments-container');var $disqusWrapper=$('#disqus-wrapper');var $commentsButton=$('.button',$commentsContainer);var i=0;function _jumpToComments(e){var href=$(this).attr('href');var commentID=href.substring(href.indexOf('#'));var scrollTop=$(window).scrollTop();if(commentID.length<2){e.preventDefault();$('html, body').animate({scrollTop:$commentsContainer.offset().top-window.NTLS.headerHeight-25},1000);}else{if(window.location.hash==commentID){window.location.hash='';window.location.hash=commentID;}
setTimeout(function(){if(scrollTop!==$(window).scrollTop()){$(window).scrollTop($(window).scrollTop()-NTLS.headerHeight);}},300);}
if($disqusWrapper.is(':hidden')){_showComments();}}
function _showComments(e){if(typeof e!=='undefined'){e.preventDefault();}
$disqusWrapper.show().css('position','static');}
function _scroll(){if(i>4){$(window).unbind('scroll.ArticleComments');return;}
if($(window).scrollTop()>=$commentsContainer.offset().top){i=5;$(window).unbind('scroll.ArticleComments');$(window).scrollTop($(window).scrollTop()-NTLS.headerHeight);return;}
i++;}
function _hashchange(){if(window.location.hash.indexOf('#comment')===0){setTimeout(function(){$(window).scrollTop($(window).scrollTop()-NTLS.headerHeight);},300);}}
$jumpToComments.on('click.ArticleComments',_jumpToComments);$commentsButton.on('click.ArticleComments',_showComments);if(window.location.hash.indexOf('#comment')===0){$(window).on('scroll.ArticleComments',_scroll);_showComments();}
if(navigator.userAgent.match(/msie/i)){var intvl=setInterval(function(){if(!$('.disqus-loader',$disqusWrapper).length){if(!NTLS.disqusLoaded){disqusReady();}
clearInterval(intvl);}},200);}};window.disqus_config=function(){this.callbacks.onReady=[disqusReady];};window.NTLS.Behaviors.VideoArticle=function(){function _click(e){var iframe='<iframe width="766px" height="375" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen />';var $iframe=[];var videoID=$(this).attr('id').replace('article-video-','');$('.video-chapter').removeClass('playing');$('#article-videoch-'+videoID).addClass('playing');var $banner=$('article header .banner');e.preventDefault();$('> *',this).remove();$iframe=$(this).html(iframe).children().first();$iframe.attr('src','http://player.vimeo.com/video/'+videoID+'?autoplay=true');$banner.addClass('video-loaded');}
function _clickchp(e){var iframe='<iframe width="766px" height="375" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen />';var $iframe=[];$('.video-chapter').removeClass('playing');$(this).addClass('playing');var videoID=$(this).attr('id').replace('article-videoch-','');var parentID=$(this).attr('data-vidd');var $banner=$('article header .banner');e.preventDefault();$iframe=$('div#article-video-'+parentID).html(iframe).children().first();$iframe.attr('src','http://player.vimeo.com/video/'+videoID+'?autoplay=true');$banner.addClass('video-loaded');}
$('.article-video').on('click.VideoArticle',_click);$('.video-chapter').on('click.VideoArticle',_clickchp);};window.NTLS.Behaviors.OutboundLinkTrack=function(){function _click(e){var traction=$(this).data('tract');var trlabel=$(this).data('trlbl');var trvalue=$(this).data('trval');_gaq.push(['_trackEvent',traction,trlabel,trvalue]);console.log($(this).data());console.log($(this).data('trval'));}
$('.obnd_lnk').on('click.OutboundLinkTrack',_click);};window.NTLS.Behaviors.MoreSocial=function(){function _click(e){$(".more_soc").toggleClass("closedsoc");}
$('#share_msc').on('click.MoreSocial',_click);};window.NTLS.Behaviors.RecirculationModule=function(){var $module=$('.module-more-articles');var $next=$('.next-article',$module);var $related=$('.related-articles',$module);if($next.length){window.NTLS.equalHeights($next.add($related));}};window.NTLS.Behaviors.ArticleSlideShow=function(){var $slideShowContainer=$('.module-article-slideshow');if(!$slideShowContainer.length){return;}
var $slideShowTrigger=$('.article-header .banner');var $slideShowClose=$('.close-article-slideshow',$slideShowContainer);var $slideShowInner=$('.article-slideshow-inner',$slideShowContainer);var $slideContainer=$('.article-slideshow-slides',$slideShowContainer);var $slides=$('> *',$slideContainer);$slides.last().clone().prependTo($slideContainer);$slides.first().clone().appendTo($slideContainer);$slides=$('> *',$slideContainer);var $imgs=$('.slideshow-img');var $prevButton=$('.article-slideshow-prev');var $nextButton=$('.article-slideshow-next');var slideCount=$slides.length;var windowWidth=$(window).width();var windowHeight=$(window).height();var currentSlide=0;var stripHeight=0;var stripHeightOuter=0;var speed=500;function _swipeStatus(event,phase,direction,distance){if(phase=='move'&&(direction=='left'||direction=='right')){var duration=0;if(direction=='left'){_scrollSlides((windowWidth*currentSlide)+distance,duration);}
else if(direction=='right'){_scrollSlides((windowWidth*currentSlide)-distance,duration);}}
else if(phase=='cancel'){_scrollSlides(windowWidth*currentSlide,speed);}
else if(phase=='end'){if(direction=='right'){_slide(Math.max(currentSlide-1,0));}
else if(direction=='left'){_slide(Math.min(currentSlide+1,slideCount-1));}}}
function _lazyLoad($slide){var $img=$('.slideshow-img',$slide);$img.attr('src',$img.attr('data-src'));}
function _slide(slideIndex,duration){if($slideContainer.is(':animated')){return;}
if(typeof duration==='undefined'){duration=speed;}
currentSlide=slideIndex;_scrollSlides(windowWidth*currentSlide,duration);}
function _scrollSlides(distance,duration){distance=(distance<0?'':'-')+Math.abs(distance).toString();if(!$slideContainer.is(':animated')){if(duration){$slideContainer.animate({marginLeft:distance},duration,function(){if(currentSlide===0){_slide(slideCount-2,0);}
else if(currentSlide+1==slideCount){_slide(1,0);}});}
else{$slideContainer.css({marginLeft:distance+'px'});}}}
function _showSlideShow(lazyLoad){$slideShowContainer.show();_resize();NTLS.equalHeights($slides);}
function _hideSlideShow(){_slide(1,0);$slideShowContainer.hide();if(Modernizr.touch){$('a').blur();}}
function _click(e){e.preventDefault();if($(e.target).closest('li').is('.article-slideshow-prev')){_slide(currentSlide-1);}
else{_slide(currentSlide+1);}}
function _resize(){if($slideShowContainer.is(':hidden')){return;}
windowWidth=$(window).width();windowHeight=$(window).height();$slides.width(windowWidth).height(windowHeight-stripHeightOuter);$slideContainer.width(windowWidth*slideCount);_scrollSlides((windowWidth*currentSlide),0);$imgs.each(function(){var height=$(this).height();if(!height){height=$(this).data('height');}
var mt=-(height/2);var css={marginTop:mt,top:'50%'};$(this).css(css);if($(this).position().top+mt<18){css.marginTop=18;css.top=0;}
$(this).css(css);});}
function _keyDown(e){if($slideShowContainer.is(':hidden')){return;}
if(e.keyCode==37){_slide(currentSlide-1);}
else if(e.keyCode==39){_slide(currentSlide+1);}
else if(e.keyCode==27){_hideSlideShow();}}
_showSlideShow();$('figcaption',$slideShowInner).each(function(){stripHeight=Math.max(stripHeight,$(this).outerHeight());}).height(stripHeight);NTLS.equalHeights($('figcaption .wrap',$slideShowInner));stripHeightOuter=$('figcaption',$slideShowInner).first().outerHeight();$slides.css({paddingBottom:stripHeightOuter,marginBottom:-stripHeightOuter});$slideShowInner.css({borderBottom:'solid '+stripHeightOuter+'px #000'});$imgs.each(function(){$(this).data('height',$(this).attr('height'));}).removeAttr('width').removeAttr('height');_resize();_slide(1,0);_hideSlideShow();if(Modernizr.touch){$slides.swipe({triggerOnTouchEnd:true,swipeStatus:_swipeStatus,allowPageScroll:'vertical',threshold:75});}
$(window).on('resize.ArticleSlideShow',_resize);$(window).on('keydown',_keyDown);$slideShowTrigger.on('click.ArticleSlideShow',_showSlideShow);$slideShowClose.on('click.ArticleSlideShow',_hideSlideShow);$prevButton.add($nextButton).on('click.ArticleSlideShow',_click);};$('.exp_sidebar').each(function(){var con=$(this).html();var title=$(this).attr('title');var tid=title.replace(/\W/g,'');$(this).html('<span id="'+tid+'"><div class="exp_bar off"><strong>Sidebar:</strong> '+title+' <i class="icon-right"></i><i class="icon-down"></i></div><div class="exp_sidebarcon">'+con+'</div></span>');})
$('.exp_bar').click(function(){$(this).toggleClass('off',2000);})
function iFramerepl(){if($('#iframeadd').length!=0){var con=$('#iframeadd').html();$(function(){$("header.article-header div.banner").html(con);})}};iFramerepl();})(jQuery);